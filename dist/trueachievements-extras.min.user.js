// ==UserScript==
// @name          TrueAchievements Extra
// @namespace     dynamite-andy
// @version       1.4.0
// @iconURL       https://github.com/andrewcartwright1/trueachievements-extra/blob/main/src/resources/icons/favicon32x32.ico?raw=true
// @icon64URL     https://github.com/andrewcartwright1/trueachievements-extra/blob/main/src/resources/icons/favicon64x64.ico?raw=true
// @updateURL     https://github.com/andrewcartwright1/trueachievements-extra/raw/main/dist/trueachievements-extras.min.user.js
// @downloadURL   https://github.com/andrewcartwright1/trueachievements-extra/raw/main/dist/trueachievements-extras.min.user.js
// @supportURL    https://github.com/andrewcartwright1/trueachievements-extra/issues
// @description   Provides a variety of extras for use on TrueAchievements
// @author        Dynamite Andy - dynamiteandy@gmail.com
// @match         http*://*.trueachievements.com/*
// @run-at        document-start
// @grant         GM_getValue
// @grant         GM_setValue
// @grant         GM_deleteValue
// @grant         GM_addStyle
// ==/UserScript==

// Last Updated: 29/12/2022, 20:30:36

!function e(t,a,n){function r(s,i){if(!a[s]){if(!t[s]){var l="function"==typeof require&&require;if(!i&&l)return l(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=a[s]={exports:{}};t[s][0].call(u.exports,(function(e){return r(t[s][1][e]||e)}),u,u.exports,e,t,a,n)}return a[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(e,t,a){var n=e("./toPropertyKey.js");t.exports=function(e,t,a){return(t=n(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPropertyKey.js":4}],2:[function(e,t,a){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.__esModule=!0,t.exports.default=t.exports},{}],3:[function(e,t,a){var n=e("./typeof.js").default;t.exports=function(e,t){if("object"!==n(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!==n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./typeof.js":5}],4:[function(e,t,a){var n=e("./typeof.js").default,r=e("./toPrimitive.js");t.exports=function(e){var t=r(e,"string");return"symbol"===n(t)?t:String(t)},t.exports.__esModule=!0,t.exports.default=t.exports},{"./toPrimitive.js":3,"./typeof.js":5}],5:[function(e,t,a){function n(e){return t.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.__esModule=!0,t.exports.default=t.exports,n(e)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},{}],6:[function(e,t,a){"use strict";var n=e("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(a,"__esModule",{value:!0}),a.tag=a.log=a.LogLevel=a.Log=void 0;var r=n(e("@babel/runtime/helpers/defineProperty"));
/**
 * @author Ray Martone
 * @copyright Copyright (c) 2019-2022 Ray Martone
 * @license MIT
 * @description log adapter that provides level based filtering and tagging
 */let o;var s;a.LogLevel=o,function(e){e.DEBUG="DEBUG",e.TRACE="TRACE",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.OFF="OFF"}(o||(a.LogLevel=o={})),function(e){e[e.DEBUG=1]="DEBUG",e[e.TRACE=2]="TRACE",e[e.INFO=3]="INFO",e[e.WARN=4]="WARN",e[e.ERROR=5]="ERROR",e[e.OFF=6]="OFF"}(s||(s={}));const i={};a.tag=i;class l{constructor(){(0,r.default)(this,"_tagToLevel",{})}init(e,t){for(const t in e)this._tagToLevel[t]=s[e[t]]||1;void 0!==t&&(this._callback=t);for(const e in this._tagToLevel)i[e]=e;return this}error(e,t,...a){this.log(s.ERROR,e,t,a)}warn(e,t,...a){this.log(s.WARN,e,t,a)}info(e,t,...a){this.log(s.INFO,e,t,a)}trace(e,t,...a){this.log(s.TRACE,e,t,a)}debug(e,t,...a){this.log(s.DEBUG,e,t,a)}log(e,t,a,n){var r;this._callback&&e>=(null!==(r=this._tagToLevel[t])&&void 0!==r?r:s.DEBUG)&&this._callback(s[e],t,a,n)}}a.Log=l;const h=new l;a.log=h},{"@babel/runtime/helpers/defineProperty":1,"@babel/runtime/helpers/interopRequireDefault":2}],7:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const n=e("./scripts/helpers/date-util"),r={get memoize(){const e=GM_getValue("trueachievements-extra-memoized","");return 0!==e.length?new Map(JSON.parse(e)):new Map},set memoize(e){GM_setValue("trueachievements-extra-memoized",JSON.stringify(Array.from(e.entries())))},forceClear:()=>{GM_deleteValue("trueachievements-extra-memoized")},clearExpired:null};r.clearExpired=()=>{const e=Array.from(r.memoize.entries()).filter((e=>(0,n.isBeforeNow)(e[1].expiryTime)));r.memoize=new Map(e)},a.default=r},{"./scripts/helpers/date-util":13}],8:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={stickyHeader:{get enabled(){return GM_getValue("trueachievements-extra-stickyHeader-enabled",!1)},set enabled(e){GM_setValue("trueachievements-extra-stickyHeader-enabled",e)}},recentWinners:{get enabled(){return GM_getValue("trueachievements-extra-recentWinners-enabled",!1)},set enabled(e){GM_setValue("trueachievements-extra-recentWinners-enabled",e)},get onlineUnlocksOnly(){return this.enabled&&GM_getValue("trueachievements-extra-recentWinners-onlineUnlocksOnly",!1)},set onlineUnlocksOnly(e){GM_setValue("trueachievements-extra-recentWinners-onlineUnlocksOnly",e)},get baseGameOnly(){return this.enabled&&GM_getValue("trueachievements-extra-recentWinners-baseGameOnly",!1)},set baseGameOnly(e){GM_setValue("trueachievements-extra-recentWinners-baseGameOnly",e)}},staffWalkthroughImprovements:{get enabled(){return GM_getValue("trueachievements-extra-staffWalkthroughImprovements-enabled",!1)},set enabled(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-enabled",e)},get stickyPageHistory(){return GM_getValue("trueachievements-extra-staffWalkthroughImprovements-stickyPageHistory",!1)},set stickyPageHistory(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-stickyPageHistory",e)},get editPageLeft(){return GM_getValue("trueachievements-extra-staffWalkthroughImprovements-editPageLeft",!1)},set editPageLeft(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-editPageLeft",e)},get walkthroughTeamButton(){return GM_getValue("trueachievements-extra-staffWalkthroughImprovements-walkthroughTeamButton",!1)},set walkthroughTeamButton(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-walkthroughTeamButton",e)},get manageWalkthroughDefaultStatus(){return GM_getValue("trueachievements-extra-staffWalkthroughImprovements-manageWalkthroughDefaultStatus",!1)},set manageWalkthroughDefaultStatus(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-manageWalkthroughDefaultStatus",e)},get improvedImageSelector(){return GM_getValue("trueachievements-extra-staffWalkthroughImprovements-improvedImageSelector",!1)},set improvedImageSelector(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-improvedImageSelector",e)},get clickableTableLinks(){return GM_getValue("trueachievements-extra-staffWalkthroughImprovements-clickableTableLinks",!1)},set clickableTableLinks(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-clickableTableLinks",e)},get manageWalkthroughDefaultStatusValue(){return GM_getValue("trueachievements-extra-staffWalkthroughImprovements-manageWalkthroughDefaultStatusValue","-1")},set manageWalkthroughDefaultStatusValue(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-manageWalkthroughDefaultStatusValue",e)}}}},{}],9:[function(e,t,a){"use strict";var n,r,o,s,i,l,h,u,m,g,c,d,f,p,v,k;Object.defineProperty(a,"__esModule",{value:!0}),a.Constants=void 0;const y="ta-x",w="js-ta-x",x="--ta-x";class b{}a.Constants=b,b.Styles=((n=class{}).root="trueachievement-extras",n.Animations=((r=class{}).yShow=`${y}-y-show`,r.yHide=`${y}-y-hide`,r.yHideNoTransition=`${r.yHide}-no-transition`,r),n.Base=((o=class{}).hide=`${y}-hide`,o),n.SettingsMenu=((s=class{}).featureJs=`${w}-settings-menu`,s.featureStyle=`${y}-settings-menu`,s.subSetting=`${s.featureStyle}-sub-setting`,s.wrenchJs=`${s.featureJs}-wrench`,s.closeJs=`${s.featureJs}-close`,s),n.StickyHeader=((i=class{}).featureJs=`${w}-sticky-header`,i.featureStyle=`${y}-sticky-header`,i),n.StaffWalkthroughImprovements=((l=class{}).featureJs=`${w}-staff-walkthrough-improvements`,l.featureStyle=`${y}-staff-walkthrough-improvements`,l.WalkthroughPage=((h=class{}).featureJs=`${w}-staff-walkthrough-improvements-walkthrough-page`,h.featureStyle=`${y}-staff-walkthrough-improvements-walkthrough-page`,h.containerJs=`${h.featureJs}-container`,h.containerStyle=`${h.featureStyle}-container`,h.stickyPageHistoryJs=`${h.featureJs}-sticky-page-history`,h.stickyPageHistoryStyle=`${h.featureStyle}-sticky-page-history`,h.editPageLeftJs=`${h.featureJs}-edit-page-left`,h.editPageLeftStyle=`${h.featureStyle}-edit-page-left`,h.walkthroughTeamButtonJs=`${h.featureJs}-walkthrough-team-button`,h.walkthroughTeamButtonStyle=`${h.featureStyle}-walkthrough-team-button`,h),l.ManageWalkthroughPage=((u=class{}).featureJs=`${w}-staff-walkthrough-improvements-manage-walkthrough-page`,u.featureStyle=`${y}-staff-walkthrough-improvements-manage-walkthrough-page`,u.containerJs=`${u.featureJs}-container`,u.containerStyle=`${u.featureStyle}-container`,u.clickableAchievementsJs=`${u.featureJs}-clickable-achievements`,u),l.EditWalkthroughPage=((m=class{}).featureJs=`${w}-staff-walkthrough-improvements-edit-walkthrough-page`,m.featureStyle=`${y}-staff-walkthrough-improvements-edit-walkthrough-page`,m.containerJs=`${m.featureJs}-container`,m.containerStyle=`${m.featureStyle}-container`,m.improvedImageSelectorJs=`${m.featureJs}-improved-image-selector`,m.improvedImageSelectorStyle=`${m.featureStyle}-improved-image-selector`,m.improvedImageSelectorContainerJs=`${m.improvedImageSelectorJs}-container`,m.improvedImageSelectorContainerStyle=`${m.improvedImageSelectorStyle}-container`,m.improvedImageSelectorImageTitleJs=`${m.improvedImageSelectorJs}-image-title`,m.improvedImageSelectorImageTitleStyle=`${m.improvedImageSelectorStyle}-image-title`,m),l),n.Variables=((g=class{}).StickyHeader=((c=class{}).featureVariableStylePrefix=`${x}-sticky-header`,c.height=`${c.featureVariableStylePrefix}-height`,c),g.StaffWalkthroughImprovements=((d=class{}).WalkthroughPage=((f=class{}).featureVariableStylePrefix=`${x}-staff-walkthrough-improvements-walkthrough-page`,f.stickyPageHistoryTop=`${f.featureVariableStylePrefix}-sticky-page-history-top`,f),d),g),n),b.Templates=((p=class{}).StaffWalkthroughImprovements=((v=class{}).ManageWalkthroughPage=((k=class{}).featureTemplatePrefix="ta-x-template-manage-walkthrough",k.achievementRow=`${k.featureTemplatePrefix}-achievement-row`,k),v),p)},{}],10:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("./scripts/components/promise"),s=e("./styles/index"),i=e("./scripts/settings-menu"),l=e("./scripts/sticky-header"),h=e("./scripts/staff-walkthrough-improvements/index"),u=e("./cache"),m={[r.LogLevel.ERROR]:(e,t,a)=>console.error(`TA-X [${e}]`,t,...a),[r.LogLevel.WARN]:(e,t,a)=>console.warn(`TA-X [${e}]`,t,...a),[r.LogLevel.INFO]:(e,t,a)=>console.log(`TA-X [${e}]`,t,...a),[r.LogLevel.TRACE]:(e,t,a)=>console.log(`TA-X [${e}]`,t,...a),[r.LogLevel.DEBUG]:(e,t,a)=>console.log(`TA-X [${e}]`,t,...a)};r.log.init({},((e,t,a,n)=>{m[e](t,a,n)})),n(void 0,void 0,void 0,(function*(){u.default.clearExpired(),yield(0,o.allConcurrently)(4,[s.default,i.default,l.default,h.default])}))},{"./cache":7,"./scripts/components/promise":12,"./scripts/settings-menu":22,"./scripts/staff-walkthrough-improvements/index":24,"./scripts/sticky-header":28,"./styles/index":29,missionlog:6}],11:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.extractAllBetween=a.extractBetween=void 0;const n=(e,t=[])=>{t=Array.isArray(t)?t:[t];try{const a=new URL(e);let n="";for(let e=0;e<t.length;e++)a[t[e]]&&(n+=a[t[e]]);return n}catch(t){throw`${e} is not a valid url`}},r=new RegExp("^/a[0-9]*/.*","i"),o=new RegExp("^/a[0-9]*/.*","i"),s=new RegExp("^/game/.*/achievements$","i"),i=new RegExp("^/staff/walkthrough/editwalkthroughpage.aspx","i"),l=new RegExp("^/staff/walkthrough/managewalkthrough.aspx","i"),h=new RegExp("^/staff/walkthrough/managewalkthrough.aspx\\?walkthroughid=[0-9]*","i"),u=new RegExp("^/staff/walkthrough/walkthroughpage.aspx","i"),m=new RegExp("^/staff/walkthrough/walkthroughpreview.aspx","i"),g=new RegExp("^/staff/walkthrough/walkthroughpagepreview.aspx","i"),c=new RegExp("Today","i"),d=new RegExp("Yesterday","i");a.extractBetween=(e,t)=>{const a=new RegExp(`${e}(.*?)${e}`),n=t.match(a);return n?n[1]:t};a.extractAllBetween=(e,t)=>{const a=new RegExp(`${e}(.*?)${e}`,"g"),n=t.match(a);return n?n.map((t=>t.replace(e,""))):[t]},a.default={achievements:{achievementUrl:r,achievementUrlWithGamerId:o},game:{achievementsUrl:s},staff:{walkthrough:{editWalkthroughUrl:i,manageWalkthroughUrl:l,manageWalkthroughUrlWithWalkthroughId:h,walkthroughPageUrl:u,walkthroughPreviewUrl:m,walkthroughPagePreviewUrl:g}},words:{today:c,yesterday:d},test:{achievements:{achievementUrl:e=>r.test(n(e,"pathname")),achievementUrlWithGamerId:e=>o.test(n(e,["pathname","search"]))},game:{achievementsUrl:e=>s.test(n(e,"pathname"))},staff:{walkthrough:{all:e=>i.test(n(e,"pathname"))||l.test(n(e,"pathname"))||h.test(n(e,["pathname","search"]))||u.test(n(e,"pathname"))||m.test(n(e,"pathname"))||g.test(n(e,"pathname")),preview:e=>m.test(n(e,"pathname"))||g.test(n(e,"pathname")),editWalkthroughUrl:e=>i.test(n(e,"pathname")),manageWalkthroughUrl:e=>l.test(n(e,"pathname")),manageWalkthroughUrlWithWalkthroughId:e=>h.test(n(e,["pathname","search"])),walkthroughPageUrl:e=>u.test(n(e,"pathname")),walkthroughPreviewUrl:e=>m.test(n(e,"pathname")),walkthroughPagePreviewUrl:e=>g.test(n(e,"pathname"))}}},extractBetween:a.extractBetween}},{}],12:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.allConcurrently=a.allSequentially=void 0;a.allSequentially=e=>{let t=Promise.resolve();return Promise.all(e.reduce(((e,a)=>(t=t.then((()=>"function"==typeof a?a():a)),e.push(t),e)),[]))};a.allConcurrently=(e,t)=>{if(0===t.length)return Promise.resolve([]);const a=t.splice(e),n=t,r=[];let o=0;return new Promise((e=>{n.forEach((e=>{const a="function"==typeof e?e():e;r.push(a),a.then((e=>(t(),e)))}));const t=()=>{o===a.length?e(Promise.all(r)):(r.push(a[o]().then((e=>(t(),e)))),o++)}}))}},{}],13:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isBeforeNow=a.isValid=void 0;const n=e=>"string"==typeof e?new Date(e):e;a.isValid=e=>"invalid date"!==new Date(n(e)).toString().toLowerCase();a.isBeforeNow=e=>new Date<n(e)},{}],14:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0}),a.HTMLFetch=a.JSONFetch=a.fetchHelper=void 0;a.fetchHelper=(e,t={})=>n(void 0,void 0,void 0,(function*(){t.headers=t.headers||new Headers,t.method=t.method?t.method.toUpperCase():"GET";return yield fetch(e,t)}));a.JSONFetch=(e,t={})=>n(void 0,void 0,void 0,(function*(){return(e=>e.json().catch((()=>e)))(yield(0,a.fetchHelper)(e,t))}));a.HTMLFetch=(e,t={})=>n(void 0,void 0,void 0,(function*(){return(e=>{e.text().then((e=>(new DOMParser).parseFromString(e,"text/html"))).catch((()=>e))})(yield(0,a.fetchHelper)(e,t))}))},{}],15:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.classListContains=void 0;a.classListContains=(e,t)=>{const a=Array.isArray(t)?t:[t];for(let t=0;t<a.length;t++)if(e.classList.contains(a[t]))return!0;return!1}},{}],16:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("../models/memoized-fetch"),o=e("../../cache"),s=e("./fetch"),i=e("./date-util"),l=o.default.memoize;a.default=(e,t={},a={deleteAfter:{value:7,period:"days"}})=>n(void 0,void 0,void 0,(function*(){const n=l.get(e);if(n&&(0,i.isBeforeNow)(new Date(n.expiryTime)))return n.response;const h=yield(0,s.fetchHelper)(e,t),u=yield h.text();return l.set(e,new r.MemoizedFetch(a).setResponse(u)),o.default.memoize=l,u}))},{"../../cache":7,"../models/memoized-fetch":21,"./date-util":13,"./fetch":14}],17:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.toBool=a.toDate=a.toInt=void 0;const n=e("../../regex"),r=e("./date-util"),o=new Date((new Date).setHours(0,0,0,0)),s=new Date(new Date(o).setDate(o.getDate()-1));a.toInt=e=>{if("string"==typeof e){const t=parseInt(e.replace(/,/g,""),10);return isNaN(t)?null:t}return"boolean"==typeof e?e?1:0:"number"==typeof e?e:null};a.toDate=e=>n.default.words.today.test(e)?o:n.default.words.yesterday.test(e)?s:(0,r.isValid)(e)?new Date(e):null;a.toBool=e=>"string"==typeof e?"true"===e.toLowerCase()||"false"!==e.toLowerCase()&&null:"number"==typeof e?1===e||0!==e&&null:"boolean"==typeof e?e:null,a.default={toInt:a.toInt,toDate:a.toDate,toBool:a.toBool}},{"../../regex":11,"./date-util":13}],18:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.template=void 0;const n=document.createElement("template");a.template=(e,t={})=>{const{image:a,element:r}=t;n.appendChild(e),n.innerHTML=e.outerHTML.replace(/(\r\n|\n|\r)/gm,"").replace(/{GM_info.script.version}/g,GM_info.script.version||"").replace(/{image.title}/g,(null==a?void 0:a.title)||"").replace(/{element.outerHTML}/g,(null==r?void 0:r.outerHTML)||"");const o=n.content.firstChild;return n.innerHTML="",o}},{}],19:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.until=a.waitForElement=void 0;a.waitForElement=(e,t=document.documentElement,a=1e4)=>new Promise((n=>{if(t.querySelector(e))return n(t.querySelector(e));let r;const o=setTimeout((()=>{r.disconnect(),n(null)}),a);r=new MutationObserver((()=>{t.querySelector(e)&&(r.disconnect(),clearTimeout(o),n(t.querySelector(e)))})),r.observe(t||document.documentElement,{childList:!0,subtree:!0})}));a.until=e=>{const t=a=>e()?a():setTimeout((()=>t(a)),250);return new Promise(t)}},{}],20:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});const n=e("../helpers/parse");a.default=class{constructor(...e){1!==e.length||this.fromString(e[0])}fromString(e){try{const t=JSON.parse(e);this.selector=t.selector,this.value=(0,n.toBool)(t.value)}catch(e){}}isValid(){return null!=this.selector&&null!=this.value}toString(){return JSON.stringify(this)}}},{"../helpers/parse":17}],21:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MemoizedFetch=a.MemoizedFetchOpts=void 0;a.MemoizedFetchOpts=class{constructor(e){this.deleteAfter=e}};a.MemoizedFetch=class{constructor(e){const t=new Date;switch(e.deleteAfter.period){case"seconds":this.expiryTime=new Date(t.setSeconds(t.getSeconds()+e.deleteAfter.value));break;case"minutes":this.expiryTime=new Date(t.setMinutes(t.getMinutes()+e.deleteAfter.value));break;case"hours":this.expiryTime=new Date(t.setHours(t.getHours()+e.deleteAfter.value));break;case"days":this.expiryTime=new Date(t.setSeconds(t.getDay()+e.deleteAfter.value))}}setResponse(e){return this.response=e,this}fromString(e){try{const t=JSON.parse(e);this.expiryTime=t.expiryTime,this.response=t.response}catch(e){}}toString(){return JSON.stringify(this)}}},{}],22:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../config"),s=e("../constants"),i=e("./helpers/template"),l=e("./helpers/wait"),h=e("./models/conditional-render");let u,m;const g=e=>"SELECT"===e.nodeName,c=e=>"INPUT"===e.nodeName&&"checkbox"===e.type;a.default=()=>n(void 0,void 0,void 0,(function*(){r.log.debug("Settings-Menu","Starting"),yield n(void 0,void 0,void 0,(function*(){r.log.debug("Settings-Menu","Starting - applyBody");const e=(new DOMParser).parseFromString('<div class="js-ta-x-settings-menu-wrench gamer-page" aria-haspopup="true">\r\n    <i class="fa fa-wrench"></i>\r\n</div>\r\n\r\n<div class="js-ta-x-settings-menu ta-x-settings-menu ta-x-hide">\r\n    <div class="middle">\r\n        <div class="wrap">\r\n            <div class="labels">\r\n                <label class="js-ta-x-settings-menu-close close">\r\n                    <i class="fa fa-close"></i>\r\n                </label>\r\n            </div>\r\n            <div class="contents">\r\n                <div class="t-settings optionpanel t-5 open" >\r\n                    <div>\r\n                        <label>Sticky Header</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkStickyHeader" name="chkStickyHeader" data-config-area="stickyHeader"\r\n                                data-config-setting="enabled" checked="">\r\n                            <label for="chkStickyHeader"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div>\r\n                        <label>Staff Walkthrough Improvements</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkStaffWalkthroughImprovements" name="chkStaffWalkthroughImprovements" data-config-area="staffWalkthroughImprovements"\r\n                                data-config-setting="enabled" checked="">\r\n                            <label for="chkStaffWalkthroughImprovements"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div data-render-condition=\'{ "selector": "#chkStaffWalkthroughImprovements", "value": "true" }\' class="ta-x-hide">\r\n                        <label class="ta-x-settings-menu-sub-setting">Stick Page History To Left</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkStaffWalkthroughImprovementsStickyPageHistory" name="chkStaffWalkthroughImprovementsStickyPageHistory"\r\n                                data-config-area="staffWalkthroughImprovements" data-config-setting="stickyPageHistory" checked="">\r\n                            <label for="chkStaffWalkthroughImprovementsStickyPageHistory"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div data-render-condition=\'{ "selector": "#chkStaffWalkthroughImprovements", "value": "true" }\' class="ta-x-hide">\r\n                        <label class="ta-x-settings-menu-sub-setting">Move Edit Page Button To The Left</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkStaffWalkthroughImprovementsEditPageLeft" name="chkStaffWalkthroughImprovementsEditPageLeft"\r\n                                data-config-area="staffWalkthroughImprovements" data-config-setting="editPageLeft" checked="">\r\n                            <label for="chkStaffWalkthroughImprovementsEditPageLeft"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div data-render-condition=\'{ "selector": "#chkStaffWalkthroughImprovements", "value": "true" }\' class="ta-x-hide">\r\n                        <label class="ta-x-settings-menu-sub-setting">Add Walkthrough Team Button</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkStaffWalkthroughImprovementsWalkthroughTeamButton" name="chkStaffWalkthroughImprovementsWalkthroughTeamButton"\r\n                                data-config-area="staffWalkthroughImprovements" data-config-setting="walkthroughTeamButton" checked="">\r\n                            <label for="chkStaffWalkthroughImprovementsWalkthroughTeamButton"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div data-render-condition=\'{ "selector": "#chkStaffWalkthroughImprovements", "value": "true" }\' class="ta-x-hide">\r\n                        <label class="ta-x-settings-menu-sub-setting">Improved Image Selector</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkStaffWalkthroughImprovementsImproveImageSelector" name="chkStaffWalkthroughImprovementsImproveImageSelector"\r\n                                data-config-area="staffWalkthroughImprovements" data-config-setting="improvedImageSelector" checked="">\r\n                            <label for="chkStaffWalkthroughImprovementsImproveImageSelector"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div data-render-condition=\'{ "selector": "#chkStaffWalkthroughImprovements", "value": "true" }\' class="ta-x-hide">\r\n                        <label class="ta-x-settings-menu-sub-setting">Clickable table links</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkStaffWalkthroughImprovementsClickableTableLinks" name="chkStaffWalkthroughImprovementsClickableTableLinks"\r\n                                data-config-area="staffWalkthroughImprovements" data-config-setting="clickableTableLinks" checked="">\r\n                            <label for="chkStaffWalkthroughImprovementsClickableTableLinks"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div data-render-condition=\'{ "selector": "#chkStaffWalkthroughImprovements", "value": "true" }\' class="ta-x-hide ta-x-settings-menu-sub-setting-wrapable">\r\n                        <label class="ta-x-settings-menu-sub-setting">Default Status for Manage Walkthrough</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus" name="chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus"\r\n                                data-config-area="staffWalkthroughImprovements" data-config-setting="manageWalkthroughDefaultStatus" checked="">\r\n                            <label for="chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus"> </label>\r\n                        </div>\r\n                        <div data-render-condition=\'{ "selector": "#chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus", "value": "true" }\' class="frm-grp frm-sel ta-x-hide">\r\n                            <select id="selStaffWalkthroughImprovementsManageWalkthroughDefaultStatusValue" name="selStaffWalkthroughImprovementsManageWalkthroughDefaultStatusValue"  data-config-area="staffWalkthroughImprovements" data-config-setting="manageWalkthroughDefaultStatusValue" class="dropdown">\r\n                                <option value="-1" selected="">(All)</option>\r\n                                <option value="New">New</option>\r\n                                <option value="In progress">In progress</option>\r\n                                <option value="Ready for review">Ready for review</option>\r\n                                <option value="Ready for publish">Ready for publish</option>\r\n                                <option value="Published">Published</option>\r\n                                <option value="New owner required">New owner required</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    \x3c!-- <div>\r\n                        <label>Show recent winners</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkRecentWinners" name="chkRecentWinners"\r\n                                data-config-area="recentWinners" data-config-setting="enabled" checked="">\r\n                            <label for="chkRecentWinners"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div data-render-condition=\'{ "selector": "#chkRecentWinners", "value": "true" }\' class="ta-x-hide">\r\n                        <label class="ta-x-settings-menu-sub-setting">Online unlocks only</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkRecentWinnersOnlineUnlocksOnly" name="chkRecentWinnersOnlineUnlocksOnly"\r\n                                data-config-area="recentWinners" data-config-setting="onlineUnlocksOnly" checked="">\r\n                            <label for="chkRecentWinnersOnlineUnlocksOnly"> </label>\r\n                        </div>\r\n                    </div>\r\n                    <div data-render-condition=\'{ "selector": "#chkRecentWinners", "value": "true" }\' class="ta-x-hide">\r\n                        <label class="ta-x-settings-menu-sub-setting">Base game only</label>\r\n                        <div class="frm-grp frm-tgl">\r\n                            <input type="checkbox" id="chkRecentWinnersBaseGameOnly" name="chkRecentWinnersBaseGameOnly"\r\n                                data-config-area="recentWinners" data-config-setting="baseGameOnly" checked="">\r\n                            <label for="chkRecentWinnersBaseGameOnly"> </label>\r\n                        </div>\r\n                    </div> --\x3e\r\n\r\n                    <ul class="list-links buttons">\r\n                        <li><a href="https://github.com/andrewcartwright1/trueachievements-extra/issues/new">Raise a Bug</a></li>\r\n                        <li><a href="https://github.com/andrewcartwright1/trueachievements-extra/issues/new">Request a Feature</a></li>\r\n                    </ul>\r\n                    <div class="title">\r\n                        <span>TrueAchievements Extra</span>\r\n                        </br>\r\n                        <span>Version {GM_info.script.version}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="js-ta-x-settings-menu-close close"></div>\r\n</div>',"text/html"),t=yield(0,l.waitForElement)("header nav"),a=yield(0,l.waitForElement)('[data-tgl="nav-gamer"]',t);t.insertBefore(e.querySelector(`.${s.Constants.Styles.SettingsMenu.wrenchJs}`),a.nextSibling),m=document.querySelector(`.${s.Constants.Styles.SettingsMenu.wrenchJs}`);const n=yield(0,l.waitForElement)(".nav-gamer"),d=(0,i.template)(e.querySelector(`.${s.Constants.Styles.SettingsMenu.featureJs}`));n.parentNode.insertBefore(d,n.nextSibling),u=document.querySelector(`.${s.Constants.Styles.SettingsMenu.featureJs}`),[...u.querySelectorAll("input, select")].forEach((e=>{const t=e.dataset.configArea,a=e.dataset.configSetting;t&&a&&(c(e)?e.checked=o.default[t][a]:g(e)&&(e.value=o.default[t][a]))})),[...u.querySelectorAll("[data-render-condition]")].forEach((e=>{const t=new h.default(e.dataset.renderCondition);if(!t.isValid())return;const a=document.querySelector(t.selector);"checkbox"===a.type&&e.classList[a.checked===t.value?"remove":"add"](s.Constants.Styles.Base.hide)})),r.log.debug("Settings-Menu","Finished - applyBody")})),r.log.debug("Settings-Menu","Starting - listen"),m.addEventListener("click",(()=>{m.classList.add("active"),u.classList.add("nav-gamer"),u.classList.remove(s.Constants.Styles.Base.hide),u.classList.add("open")})),u.addEventListener("click",(({target:e})=>{(null==e?void 0:e.classList.contains(s.Constants.Styles.SettingsMenu.closeJs))&&(u.classList.remove("open"),u.classList.add(s.Constants.Styles.Base.hide),u.classList.remove("nav-gamer"),m.classList.remove("active"))})),u.addEventListener("change",(({target:e})=>{const t=e,a=e,n=null==t?void 0:t.dataset.configArea,r=null==t?void 0:t.dataset.configSetting;g(t)?o.default[n][r]=t.value:c(t)&&(o.default[n][r]=null==a?void 0:a.checked),[...u.querySelectorAll(`[data-render-condition*="#${t.id}"]`)].forEach((e=>{const t=new h.default(e.dataset.renderCondition);t.isValid()&&"checkbox"===a.type&&e.classList[a.checked===t.value?"remove":"add"](s.Constants.Styles.Base.hide)}))})),r.log.debug("Settings-Menu","Finished - listen"),r.log.debug("Settings-Menu","Finished")}))},{"../config":8,"../constants":9,"./helpers/template":18,"./helpers/wait":19,"./models/conditional-render":20,missionlog:6}],23:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../../config"),s=e("../../constants"),i=e("../../regex"),l=e("../helpers/wait"),h=e("../../styles/staff-walkthrough-improvements"),u=e("../helpers/template"),m=e("../components/promise"),g=()=>n(void 0,void 0,void 0,(function*(){if(!o.default.staffWalkthroughImprovements.improvedImageSelector)return;r.log.debug("Edit-Walkthrough","Starting - applyImprovedImageSelector");const e=(new DOMParser).parseFromString('<div class="js-ta-x-staff-walkthrough-improvements-walkthrough-page-container ta-x-staff-walkthrough-improvements-walkthrough-page-container">\r\n\r\n</div>\r\n\r\n<div class="js-ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container">\r\n\r\n</div>\r\n\r\n<div class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-sticky-header">\r\n\r\n</div>\r\n\r\n<a class="button js-ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button" href="/staff/walkthrough/managewalkthrough.aspx">Walkthrough Team</a>\r\n\r\n<p class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title">{image.title}</p>',"text/html"),t=e.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorContainerJs}`),a=yield(0,l.waitForElement)("#oWalkthroughImageViewer");a.classList.add(s.Constants.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorStyle,s.Constants.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorJs);const n=a.querySelector(".imageviewer");a.insertBefore(t,n),t.appendChild(n.querySelector(".itemname, .noimages")),t.appendChild(n.querySelector(".addimages a")),[...n.querySelectorAll(".ivimage a")].forEach((t=>{const a=e.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorImageTitleJs}`).cloneNode(!0),n=(0,u.template)(a,{image:t.querySelector("img")});n.innerText=(0,i.extractBetween)("'",n.innerText),t.appendChild(n)})),r.log.debug("Edit-Walkthrough","Finished - applyImprovedImageSelector")}));a.default=()=>n(void 0,void 0,void 0,(function*(){i.default.test.staff.walkthrough.editWalkthroughUrl(window.location.href)&&(r.log.debug("Edit-Walkthrough","Starting"),yield n(void 0,void 0,void 0,(function*(){r.log.debug("Edit-Walkthrough","Starting - applyBody"),yield(0,m.allConcurrently)(2,[h.default,g]),r.log.debug("Edit-Walkthrough","Finished - applyBody")})),r.log.debug("Edit-Walkthrough","Starting - listen"),o.default.staffWalkthroughImprovements.improvedImageSelector&&(r.log.debug("Edit-Walkthrough","Starting improvedImageSelector - listen"),document.addEventListener("click",(({target:e})=>{if(null!==(null==e?void 0:e.closest('[aria-label="Add Image"]')))return;if(null!==(null==e?void 0:e.closest(`.${s.Constants.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorJs}`)))return;const t=document.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorJs}`);"block"===t.style.display&&(t.style.display="none")})),window.addEventListener("blur",(()=>{if(document.activeElement===document.querySelector("#txtWalkthrough_ifr")){const e=document.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorJs}`);if("block"!==e.style.display)return;e.style.display="none"}})),r.log.debug("Edit-Walkthrough","Finished improvedImageSelector - listen")),r.log.debug("Edit-Walkthrough","Finished - listen"),r.log.debug("Edit-Walkthrough","Finished"))}))},{"../../config":8,"../../constants":9,"../../regex":11,"../../styles/staff-walkthrough-improvements":30,"../components/promise":12,"../helpers/template":18,"../helpers/wait":19,missionlog:6}],24:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../components/promise"),s=e("../../constants"),i=e("../helpers/wait"),l=e("../../config"),h=e("../../regex"),u=e("./manage-walkthrough"),m=e("./walkthrough-page"),g=e("./edit-walkthrough"),c=e("./walkthrough-preview");a.default=()=>n(void 0,void 0,void 0,(function*(){l.default.staffWalkthroughImprovements.enabled&&h.default.test.staff.walkthrough.all(window.location.href)&&(r.log.debug("Staff-Walkthrough-Improvements","Starting"),(yield(0,i.waitForElement)("body"))?(document.body.classList.add(s.Constants.Styles.StaffWalkthroughImprovements.featureJs,s.Constants.Styles.StaffWalkthroughImprovements.featureStyle),yield(0,o.allConcurrently)(4,[u.default,m.default,g.default,c.default]),r.log.debug("Staff-Walkthrough-Improvements","Finished")):r.log.error("Staff-Walkthrough-Improvements","Failed to add, The body element was not found."))}))},{"../../config":8,"../../constants":9,"../../regex":11,"../components/promise":12,"../helpers/wait":19,"./edit-walkthrough":23,"./manage-walkthrough":25,"./walkthrough-page":26,"./walkthrough-preview":27,missionlog:6}],25:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../../config"),s=e("../../constants"),i=e("../../regex"),l=e("../helpers/wait"),h=e("../helpers/memoize-fetch"),u=e("../helpers/parse"),m=e("../components/promise"),g=e("../helpers/template");let c;const d=()=>n(void 0,void 0,void 0,(function*(){if(!o.default.staffWalkthroughImprovements.manageWalkthroughDefaultStatus)return;if(i.default.test.staff.walkthrough.manageWalkthroughUrlWithWalkthroughId(window.location.href))return;r.log.debug("Manage-Walkthrough","Started - applyDefaultStatus");const e=yield(0,l.waitForElement)("#ddlStatusFilter");null===e.querySelector("[selected]")&&e.value!==o.default.staffWalkthroughImprovements.manageWalkthroughDefaultStatusValue?(e.value=o.default.staffWalkthroughImprovements.manageWalkthroughDefaultStatusValue,e.onchange(null)):r.log.info("Manage-Walkthrough","A status has already been selected"),r.log.debug("Manage-Walkthrough","Started - applyDefaultStatus")})),f=()=>n(void 0,void 0,void 0,(function*(){r.log.debug("Manage-Walkthrough","Started - adjustButtons");const e=yield(0,l.waitForElement)("#btnWalkthrough_Options",c);let t=null;[...e.querySelectorAll("li a")].forEach((e=>{e.classList.add("button"),null===t&&(t=e.closest(".buttons")),t&&t.appendChild(e)})),t?t.parentNode.insertBefore(t,t.previousElementSibling):r.log.warn("Manage-Walkthrough","Did not find walkthrough options button container"),r.log.debug("Manage-Walkthrough","Finished - adjustButtons")})),p=()=>n(void 0,void 0,void 0,(function*(){r.log.debug("Manage-Walkthrough","Started - adjustButtons");const e=yield(0,l.waitForElement)(`.${s.Constants.Styles.StaffWalkthroughImprovements.ManageWalkthroughPage.containerJs}`,c);e?(e.appendChild(yield(0,l.waitForElement)("#chWalkthroughGames",c)),e.appendChild(yield(0,l.waitForElement)("#chWalkthroughAchievements",c)),e.appendChild(yield(0,l.waitForElement)("#chWalkthroughGamers",c)),e.appendChild(yield(0,l.waitForElement)("#chWalkthroughOtherSiteLink",c))):r.log.warn("Manage-Walkthrough","Did not find walkthrough sidebar container"),r.log.debug("Manage-Walkthrough","Finished - adjustButtons")})),v=()=>n(void 0,void 0,void 0,(function*(){if(!o.default.staffWalkthroughImprovements.clickableTableLinks)return;r.log.debug("Manage-Walkthrough","Started - applyClickableTableLinks");const e=(new DOMParser).parseFromString('<template id="ta-x-template-manage-walkthrough-achievement-row">\r\n    <tr>\r\n        <td class="point"></td>\r\n        <td class="c1">{element.outerHTML}</td>\r\n        <td class="c2"></td>\r\n        <td class="dlop plain"></td>\r\n    </tr>\r\n</template>',"text/html"),t=document.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.ManageWalkthroughPage.containerJs}`),a=yield(0,l.waitForElement)("#lstWalkthroughIDselectedrow a"),d=(0,u.toInt)((0,i.extractAllBetween)("'",a.href)[1]),f=yield(0,h.default)(`https://www.trueachievements.com/staff/walkthrough/walkthroughpreview.aspx?walkthroughid=${d}`),p=(new DOMParser).parseFromString(f,"text/html");yield(0,m.allConcurrently)(2,[()=>n(void 0,void 0,void 0,(function*(){if(yield(0,l.waitForElement)("#chWalkthroughGamers",c)){const e=[...p.querySelectorAll(".walkthroughsummary .games a.gamelink")];[...t.querySelectorAll("#scrolllstWalkthroughGames .c1")].forEach((t=>{const a=t.innerText.trim(),n=e.find((e=>e.innerText.toLowerCase()===a.toLowerCase()));n&&(t.innerText="",t.innerHTML=n.outerHTML)}))}else r.log.warn("Manage-Walkthrough","Did not find walkthrough games container")})),()=>n(void 0,void 0,void 0,(function*(){if(yield(0,l.waitForElement)("#chWalkthroughGamers",c)){const e=[...p.querySelectorAll(".walkthroughsummary .editors dd a")];[...t.querySelectorAll("#scrolllstWalkthroughGamers .c1")].forEach((t=>{const a=t.innerText.trim(),n=e.find((e=>e.innerText.toLowerCase()===a.toLowerCase()));n&&(t.innerText="",t.innerHTML=n.outerHTML)}))}else r.log.warn("Manage-Walkthrough","Did not find walkthrough gamers container")}))]),yield(0,m.allConcurrently)(2,[()=>n(void 0,void 0,void 0,(function*(){if((yield(0,l.waitForElement)("#chWalkthroughGamers",c))&&(yield(0,l.waitForElement)("#chWalkthroughAchievements",c))){const a=[...t.querySelectorAll("#chWalkthroughAchievements #scrolllstWalkthroughAchievementID .c1")],o=t.querySelector("#chWalkthroughAchievements #scrolllstWalkthroughAchievementID tbody");if(!o)return void r.log.warn("Manage-Walkthrough","Did not find walkthrough achievement container");yield(0,m.allConcurrently)(3,[...t.querySelectorAll("#scrolllstWalkthroughGames .c1 a")].map((t=>n(void 0,void 0,void 0,(function*(){const n=yield(0,h.default)(t.href);[...(new DOMParser).parseFromString(n,"text/html").querySelectorAll("main ul.ach-panels li a.title")].forEach((t=>{const n=t.innerText.trim(),r=a.find((e=>e.innerText.toLowerCase()===n.toLowerCase()));if(r){r.innerText="",r.innerHTML=t.outerHTML;const e=r.querySelector("a");e.href=i.default.test.achievements.achievementUrlWithGamerId(e.href)?new URL(e.href).pathname:e.href}else{const a=e.querySelector(`#${s.Constants.Templates.StaffWalkthroughImprovements.ManageWalkthroughPage.achievementRow}`).content.firstElementChild.cloneNode(!0),n=(0,g.template)(a,{element:t}),r=n.querySelector("a");n.querySelector("a").href=i.default.test.achievements.achievementUrlWithGamerId(r.href)?new URL(r.href).pathname:r.href,o.appendChild(n)}}))})))));const l=c.querySelector("#chWalkthroughAchievements #lstWalkthroughAchievementID .total");l.innerText=`${l.innerText}/${[...t.querySelectorAll("#chWalkthroughAchievements #scrolllstWalkthroughAchievementID .c1")].length}`}else r.log.warn("Manage-Walkthrough","Did not find walkthrough games container")}))]),r.log.debug("Manage-Walkthrough","Started - applyClickableTableLinks")}));a.default=()=>n(void 0,void 0,void 0,(function*(){i.default.test.staff.walkthrough.manageWalkthroughUrl(window.location.href)&&(r.log.debug("Manage-Walkthrough","Started"),yield n(void 0,void 0,void 0,(function*(){r.log.debug("Manage-Walkthrough","Started - applyBody");const e=(new DOMParser).parseFromString('<div class="js-ta-x-staff-walkthrough-improvements-walkthrough-page-container ta-x-staff-walkthrough-improvements-walkthrough-page-container">\r\n\r\n</div>\r\n\r\n<div class="js-ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container">\r\n\r\n</div>\r\n\r\n<div class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-sticky-header">\r\n\r\n</div>\r\n\r\n<a class="button js-ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button" href="/staff/walkthrough/managewalkthrough.aspx">Walkthrough Team</a>\r\n\r\n<p class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title">{image.title}</p>',"text/html");c=yield(0,l.waitForElement)("#divWalkthroughHolder"),yield d();const t=yield(0,l.waitForElement)("#chEditWalkthrough",c);t?(t.after(e.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.ManageWalkthroughPage.containerJs}`)),yield(0,m.allConcurrently)(2,[p,f,v])):r.log.warn("Manage-Walkthrough","Did not find edit walkthrough container"),r.log.debug("Manage-Walkthrough","Finished - applyBody")})),r.log.debug("Manage-Walkthrough","Finished"))}))},{"../../config":8,"../../constants":9,"../../regex":11,"../components/promise":12,"../helpers/memoize-fetch":16,"../helpers/parse":17,"../helpers/template":18,"../helpers/wait":19,missionlog:6}],26:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../../config"),s=e("../../constants"),i=e("../../regex"),l=e("../helpers/html-element-util"),h=e("../helpers/wait"),u=e("../components/promise");let m,g,c,d;const f=()=>n(void 0,void 0,void 0,(function*(){const e=yield(0,h.waitForElement)("#chWalkthroughPagePreview");e?m.appendChild(e):r.log.warn("Walkthrough-Page","moveWalkthroughPagePreview - did not find walkthrough preview")})),p=()=>n(void 0,void 0,void 0,(function*(){o.default.staffWalkthroughImprovements.stickyPageHistory&&(r.log.debug("Walkthrough-Page","Started - applyStickyNavBar"),c=o.default.stickyHeader.enabled,d=c?yield(0,h.waitForElement)(`.${s.Constants.Styles.StickyHeader.featureJs}`):yield(0,h.waitForElement)(".header"),g.classList.add(s.Constants.Styles.StaffWalkthroughImprovements.WalkthroughPage.stickyPageHistoryJs,s.Constants.Styles.StaffWalkthroughImprovements.WalkthroughPage.stickyPageHistoryStyle),y(!0),r.log.debug("Walkthrough-Page","Finished - applyStickyNavBar"))})),v=()=>n(void 0,void 0,void 0,(function*(){if(!o.default.staffWalkthroughImprovements.editPageLeft)return;r.log.debug("Walkthrough-Page","Started - applyEditPageLeft"),m.classList.add(s.Constants.Styles.StaffWalkthroughImprovements.WalkthroughPage.editPageLeftStyle);const e=yield(0,h.waitForElement)('[id="btnEditPage"], [id="btnEditPage2"]',m);if(e){e.classList.add(s.Constants.Styles.StaffWalkthroughImprovements.WalkthroughPage.editPageLeftJs);const t=yield(0,h.waitForElement)(".content .buttons",g);t?t.insertBefore(e,t.firstElementChild):r.log.warn("Walkthrough-Page","applyEditPageLeft - did not find walkthrough buttons on page versions element")}else r.log.warn("Walkthrough-Page","applyEditPageLeft - did not find walkthrough edit page buttons on walkthrough preview");r.log.debug("Walkthrough-Page","Finished - applyEditPageLeft")})),k=()=>n(void 0,void 0,void 0,(function*(){if(!o.default.staffWalkthroughImprovements.walkthroughTeamButton)return;r.log.debug("Walkthrough-Page","Started - applyWalkthroughTeamButton"),m.classList.add(s.Constants.Styles.StaffWalkthroughImprovements.WalkthroughPage.walkthroughTeamButtonStyle);const e=(new DOMParser).parseFromString('<div class="js-ta-x-staff-walkthrough-improvements-walkthrough-page-container ta-x-staff-walkthrough-improvements-walkthrough-page-container">\r\n\r\n</div>\r\n\r\n<div class="js-ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container">\r\n\r\n</div>\r\n\r\n<div class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-sticky-header">\r\n\r\n</div>\r\n\r\n<a class="button js-ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button" href="/staff/walkthrough/managewalkthrough.aspx">Walkthrough Team</a>\r\n\r\n<p class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title">{image.title}</p>',"text/html"),t=yield(0,h.waitForElement)(".content .buttons",g);t?t.appendChild(e.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.WalkthroughPage.walkthroughTeamButtonJs}`)):r.log.warn("Walkthrough-Page","applyWalkthroughTeamButton - did not find walkthrough buttons on page versions element"),r.log.debug("Walkthrough-Page","Finished - applyWalkthroughTeamButton")})),y=e=>{let t,a=[s.Constants.Styles.Animations.yShow,s.Constants.Styles.Animations.yHide,s.Constants.Styles.Animations.yHideNoTransition],n=window.pageYOffset-m.offsetTop+5;const r=()=>{document.documentElement.style.setProperty(s.Constants.Styles.Variables.StaffWalkthroughImprovements.WalkthroughPage.stickyPageHistoryTop,`${n}px`),g.classList.remove(...a),t&&g.classList.add(t)};if(window.pageYOffset<=m.offsetTop+(c?d.offsetHeight:0)||(c?d.classList.contains(s.Constants.Styles.Animations.yShow)?(window.pageYOffset<=window.pageYOffset+d.offsetTop&&(n+=d.offsetTop),t=s.Constants.Styles.Animations.yShow,a=[s.Constants.Styles.Animations.yHide,s.Constants.Styles.Animations.yHideNoTransition]):(t=e?s.Constants.Styles.Animations.yHideNoTransition:s.Constants.Styles.Animations.yHide,a=[s.Constants.Styles.Animations.yShow]):n-=d.offsetHeight,!(n>=(c?d.offsetHeight:0)))){if(c&&n>=0&&d.classList.contains(s.Constants.Styles.Animations.yShow))return t=s.Constants.Styles.Animations.yShow,void r();n=0,r()}else r()};a.default=()=>n(void 0,void 0,void 0,(function*(){i.default.test.staff.walkthrough.walkthroughPageUrl(window.location.href)&&(r.log.debug("Walkthrough-Page","Started"),yield n(void 0,void 0,void 0,(function*(){r.log.debug("Walkthrough-Page","Started - applyBody");const e=(new DOMParser).parseFromString('<div class="js-ta-x-staff-walkthrough-improvements-walkthrough-page-container ta-x-staff-walkthrough-improvements-walkthrough-page-container">\r\n\r\n</div>\r\n\r\n<div class="js-ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container">\r\n\r\n</div>\r\n\r\n<div class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-sticky-header">\r\n\r\n</div>\r\n\r\n<a class="button js-ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button" href="/staff/walkthrough/managewalkthrough.aspx">Walkthrough Team</a>\r\n\r\n<p class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title">{image.title}</p>',"text/html");g=yield(0,h.waitForElement)("#chWalkthroughPageVersions"),g.parentElement.insertBefore(e.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.WalkthroughPage.containerJs}`),g),m=document.querySelector(`.${s.Constants.Styles.StaffWalkthroughImprovements.WalkthroughPage.containerJs}`),m.appendChild(g),(0,u.allConcurrently)(3,[f,p,v,k]),r.log.debug("Walkthrough-Page","Finished - applyBody")})),r.log.debug("Walkthrough-Preview","Started - listen"),o.default.staffWalkthroughImprovements.stickyPageHistory&&(r.log.debug("Walkthrough-Page","Starting stickyPageHistory - listen"),window.addEventListener("scroll",(()=>y(!(0,l.classListContains)(g,[s.Constants.Styles.Animations.yHideNoTransition,s.Constants.Styles.Animations.yHide,s.Constants.Styles.Animations.yShow])))),r.log.debug("Walkthrough-Page","Finished stickyPageHistory - listen")),r.log.debug("Walkthrough-Page","Finished - listen"),r.log.debug("Walkthrough-Page","Finished"))}))},{"../../config":8,"../../constants":9,"../../regex":11,"../components/promise":12,"../helpers/html-element-util":15,"../helpers/wait":19,missionlog:6}],27:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../../regex"),s=e("../helpers/wait");a.default=()=>n(void 0,void 0,void 0,(function*(){o.default.test.staff.walkthrough.preview(window.location.href)&&(r.log.debug("Walkthrough-Preview","Starting"),yield n(void 0,void 0,void 0,(function*(){r.log.debug("Walkthrough-Preview","Starting - applyBody");const e=yield(0,s.waitForElement)(".page main");e.parentElement.classList.add("no-aside"),e.classList.add("no-aside"),(yield(0,s.waitForElement)(".page aside")).remove(),r.log.debug("Walkthrough-Preview","Finished - applyBody")})),r.log.debug("Walkthrough-Preview","Finished"))}))},{"../../regex":11,"../helpers/wait":19,missionlog:6}],28:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../config"),s=e("../constants"),i=e("./helpers/parse"),l=e("./helpers/wait");let h,u;const m=()=>window.pageYOffset<=h.offsetTop;a.default=()=>n(void 0,void 0,void 0,(function*(){o.default.stickyHeader.enabled&&(r.log.debug("Sticky-Header","Starting"),yield n(void 0,void 0,void 0,(function*(){r.log.debug("Sticky-Header","Starting - applyBody"),h=yield(0,l.waitForElement)("header");const e=h.parentNode,t=document.createElement("div");t.style.height=`${h.offsetHeight}px`,e.insertBefore(t,h),h.classList.add(s.Constants.Styles.StickyHeader.featureJs,s.Constants.Styles.StickyHeader.featureStyle),document.documentElement.style.setProperty(s.Constants.Styles.Variables.StickyHeader.height,`${h.offsetHeight}px`),m()||h.classList.add(s.Constants.Styles.Animations.yHideNoTransition),r.log.debug("Sticky-Header","Finished - applyBody")})),yield n(void 0,void 0,void 0,(function*(){r.log.debug("Sticky-Header","Starting - listen");const e=yield(0,l.waitForElement)(`.nav-gamer:not(.${s.Constants.Styles.SettingsMenu.featureJs})`),t=yield(0,l.waitForElement)(`.${s.Constants.Styles.SettingsMenu.featureJs}`);let a=e.classList.contains("open")||t.classList.contains("open");window.addEventListener("scroll",(()=>{const e=document.documentElement.scrollTop||document.body.scrollTop;m()?h.classList.remove(s.Constants.Styles.Animations.yHide,s.Constants.Styles.Animations.yHideNoTransition):"inline"===h.querySelector("#divtxtSearchContainer").style.display||(0,i.toBool)(h.dataset.menuOpen)||(u>e?(h.classList.remove(s.Constants.Styles.Animations.yHide,s.Constants.Styles.Animations.yHideNoTransition),h.classList.add(s.Constants.Styles.Animations.yShow)):u<e&&(h.classList.remove(s.Constants.Styles.Animations.yShow),h.classList.add(s.Constants.Styles.Animations.yHide))),u=e}));const n=new MutationObserver((e=>{e.forEach((({target:e,attributeName:t})=>{if("class"===t){const t=e.classList.contains("open");a!==t&&(a=t,h.setAttribute("data-menu-open",t.toString()))}}))}));n.observe(e,{attributes:!0,attributeFilter:["style","class"]}),n.observe(t,{attributes:!0,attributeFilter:["style","class"]}),r.log.debug("Sticky-Header","Finished - listen")})),r.log.debug("Sticky-Header","Finished"))}))},{"../config":8,"../constants":9,"./helpers/parse":17,"./helpers/wait":19,missionlog:6}],29:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../constants"),s=e("../scripts/helpers/wait");a.default=()=>n(void 0,void 0,void 0,(function*(){r.log.debug("Styles","Starting"),(yield(0,s.waitForElement)("body"))?(document.body.classList.add(o.Constants.Styles.root),GM_addStyle('body.trueachievement-extras .ta-x-y-show {\n  transform: translateY(0);\n  transition: transform 0.5s ease;\n}\n\nbody.trueachievement-extras .ta-x-y-hide {\n  transform: translateY(-100%);\n  transition: transform 0.5s ease;\n}\n\nbody.trueachievement-extras .ta-x-y-hide-no-transition {\n  transform: translateY(-100%);\n}\n:root {\n  --ta-x-sticky-header-height: $ta-x-sticky-header-height;\n}\n\nbody.trueachievement-extras .ta-x-hide {\n  display: none;\n}\n\n@media (min-width: 1200px) {\n  body.trueachievement-extras .middle {\n    width: 100%;\n    max-width: 1200px;\n  }\n}\n.trueachievement-extras-online-status {\n  background: #107c10;\n  border: 2px solid #d9d9d9;\n  border-radius: 50%;\n  display: block;\n  position: relative;\n  z-index: 2;\n}\n\n.trueachievement-extras-online-status.trueachievement-extras-friend-feed-online-status {\n  height: 6px;\n  left: 2.8rem;\n  margin-bottom: -4px;\n  margin-right: -10px;\n  top: -1.3rem;\n  width: 6px;\n}\n\n.trueachievement-extras-online-status.trueachievement-extras-achievement-solution-comment-online-status {\n  height: 6px;\n  left: 2.8rem;\n  margin-bottom: -5px;\n  margin-right: -10px;\n  top: -1.3rem;\n  width: 6px;\n}\n\n.trueachievement-extras-online-status.trueachievement-extras-achievement-solution-poster-online-status {\n  height: 12px;\n  left: 8.9rem;\n  margin-bottom: -16px;\n  top: -5rem;\n  width: 12px;\n}\n\n@media only screen and (max-width: 768px) {\n  .trueachievement-extras-online-status.trueachievement-extras-achievement-solution-poster-online-status {\n    height: 6px;\n    left: -1.9rem;\n    margin-bottom: -10px;\n    margin-right: 0;\n    top: -0.2rem;\n    width: 6px;\n  }\n}\n\n.trueachievement-extras-online-status.trueachievement-extras-forum-online-status {\n  height: 12px;\n  left: 2.5rem;\n  margin-bottom: -16px;\n  top: -3rem;\n  width: 12px;\n}\n\n@media only screen and (max-width: 768px) {\n  .trueachievement-extras-online-status.trueachievement-extras-forum-online-status {\n    height: 6px;\n    left: -2rem;\n    margin-bottom: 0;\n    margin-right: -10px;\n    top: 1.3rem;\n    width: 6px;\n  }\n}\n\n[data-theme=dark] .trueachievement-extras-online-status {\n  border: 2px solid #646464;\n}\nbody.trueachievement-extras .ta-x-settings-menu-column-setting {\n  flex-direction: column;\n  align-items: flex-start;\n}\n\nbody.trueachievement-extras .ta-x-settings-menu-column-setting .frm-grp {\n  padding-top: 0.5rem;\n}\n\nbody.trueachievement-extras .ta-x-settings-menu-sub-setting {\n  padding-left: 2rem;\n}\n\nbody.trueachievement-extras .ta-x-settings-menu-sub-setting-wrapable {\n  flex-wrap: wrap;\n}\n\nbody.trueachievement-extras .ta-x-settings-menu-sub-setting-wrapable label {\n  flex-basis: 80%;\n  flex-grow: 1;\n}\n\nbody.trueachievement-extras .ta-x-settings-menu-sub-setting-wrapable .frm-tgl {\n  margin-right: 0;\n}\n\nbody.trueachievement-extras .ta-x-settings-menu .close i {\n  pointer-events: none;\n}\nbody.trueachievement-extras .ta-x-sticky-header {\n  position: fixed;\n  top: 0;\n  width: 100%;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements {\n  min-width: unset !important;\n  overflow: auto;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements main {\n  min-height: unset !important;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page {\n  position: unset;\n  display: flex;\n  flex-direction: column;\n}\n/* stylelint-disable selector-id-pattern */\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector#oWalkthroughImageViewer {\n  width: 321px;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .noimages,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .itemname {\n  padding: 5px;\n  text-align: center;\n  font-size: unset !important;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-sticky-header {\n  position: sticky;\n  border-bottom: 1px solid #000;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-sticky-header .noimages {\n  margin-top: 0;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector a[title="Add images"] {\n  text-align: center;\n  padding: 5px;\n  cursor: pointer !important;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector a[title="Add images"]:hover {\n  text-decoration: underline;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .imageviewer {\n  display: flex;\n  flex-wrap: wrap;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .imageviewer .ivimage {\n  position: unset;\n  margin: 5px;\n  max-width: 46%;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title {\n  text-align: center;\n  padding-top: 3px;\n  white-space: break-spaces;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title {\n  color: #b5b9bf;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-sticky-header {\n  background-color: #2f3740;\n}\n\n/* stylelint-enable selector-id-pattern */\n/* stylelint-disable selector-id-pattern */\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divWalkthroughHolder {\n  position: unset;\n  margin-top: unset;\n  height: unset;\n  display: flex;\n  justify-content: space-between;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .buttons {\n  display: flex;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .button {\n  display: block;\n  flex-grow: 1;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .button#btnSearchWalkthrough {\n  margin: 0;\n  margin-bottom: 3px;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .button#btnSearchWalkthrough:hover {\n  margin-bottom: 5px;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .clearboth {\n  display: none;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughs,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chEditWalkthrough,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughAchievements,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughGames,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughGamers,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughOtherSiteLink {\n  position: unset;\n  top: unset;\n  left: unset;\n  display: block;\n  margin: 0;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chEditWalkthrough {\n  flex: 1;\n  margin: 0 1.5rem;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #btnWalkthrough {\n  display: none;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n}\n\n/* stylelint-enable selector-id-pattern */\n/* stylelint-disable selector-id-pattern */\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container {\n  display: flex;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPagePreview {\n  margin-left: 0;\n  position: unset;\n  width: unset;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPagePreview {\n  flex: 1;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions {\n  height: 100%;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions.ta-x-staff-walkthrough-improvements-walkthrough-page-sticky-page-history {\n  position: relative;\n  top: var(--ta-x-staff-walkthrough-improvements-walkthrough-page-sticky-page-history-top, 0);\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions.ta-x-y-hide {\n  transform: translateY(calc(-1 * var(--ta-x-sticky-header-height, 0)));\n  transition: transform 0.5s ease;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions.ta-x-y-hide-no-transition {\n  transform: translateY(calc(-1 * var(--ta-x-sticky-header-height, 0)));\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-edit-page-left #chWalkthroughPageVersions .content .buttons,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button #chWalkthroughPageVersions .content .buttons {\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-edit-page-left #chWalkthroughPageVersions .content .buttons .button,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button #chWalkthroughPageVersions .content .buttons .button {\n  flex: 1;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-edit-page-left #chWalkthroughPageVersions .content .buttons .button:not(:first-of-type),\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button #chWalkthroughPageVersions .content .buttons .button:not(:first-of-type) {\n  margin-top: 5px;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-edit-page-left #chWalkthroughPageVersions .content .buttons .clearboth,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button #chWalkthroughPageVersions .content .buttons .clearboth {\n  display: none;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-edit-page-left #chWalkthroughPagePreview .content .buttons {\n  display: none;\n}\n\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-edit-page-left #chWalkthroughPagePreview .content .buttons .clearboth {\n  display: none;\n}\n\n/* stylelint-enable selector-id-pattern */\n'),r.log.debug("Styles","Finished")):r.log.error("Styles","Failed to add, The body element was not found")}))},{"../constants":9,"../scripts/helpers/wait":19,missionlog:6}],30:[function(e,t,a){"use strict";var n=this&&this.__awaiter||function(e,t,a,n){return new(a||(a=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(e){o(e)}}function i(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,i)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(a,"__esModule",{value:!0});const r=e("missionlog"),o=e("../constants"),s=e("../scripts/helpers/wait"),i=()=>n(void 0,void 0,void 0,(function*(){r.log.debug("Staff-Walkthrough-Improvements-Styles","Starting - listen");const e=yield(0,s.waitForElement)("#txtWalkthrough_ifr"),t=yield(0,s.waitForElement)("[data-theme]"),a=t.getAttribute("data-theme");e.addEventListener("load",(()=>n(void 0,void 0,void 0,(function*(){r.log.debug("Staff-Walkthrough-Improvements-Styles","Starting - load event listener");const t=e&&e.contentDocument,n=yield(0,s.waitForElement)("#tinymce",t);n.classList.add(o.Constants.Styles.root,o.Constants.Styles.StaffWalkthroughImprovements.featureStyle),n.setAttribute("data-ta-x-theme",a),r.log.debug("Staff-Walkthrough-Improvements-Styles","set iframe theme to",a);const i=t.createElement("style");i.innerHTML="body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] {\n  background-color: #444;\n  color: #bbb;\n  border-color: #555;\n}",t.head.appendChild(i);const l=t.createElement("script");l.innerHTML="window.addEventListener('message', function(event) {\n      document.body.setAttribute('data-ta-x-theme', event.data.theme);\n    });",t.head.appendChild(l),e.removeEventListener("load",this),r.log.debug("Staff-Walkthrough-Improvements-Styles","Finished - load event listener")}))));const i=new MutationObserver((t=>{t.forEach((t=>{if("attributes"===t.type&&"data-theme"===t.attributeName){const a=t.target.getAttribute("data-theme");r.log.debug("Staff-Walkthrough-Improvements-Styles","Started - mutation observer",a),null!=a?(e.contentWindow.postMessage({theme:a},"*"),document.body.setAttribute("data-ta-x-theme",a),r.log.debug("Staff-Walkthrough-Improvements-Styles","set iframe theme to",a),r.log.debug("Staff-Walkthrough-Improvements-Styles","Finished - mutation observer")):r.log.warn("Staff-Walkthrough-Improvements-Styles","Theme was null or undefined")}}))}));i.observe(t,{attributes:!0}),document.body.setAttribute("data-ta-x-theme",a),r.log.debug("Staff-Walkthrough-Improvements-Styles","Finished - listen")}));a.default=()=>n(void 0,void 0,void 0,(function*(){r.log.debug("Staff-Walkthrough-Improvements-Styles","Starting"),yield(0,s.waitForElement)('[href*="skin.min.css"]'),document.head?(GM_addStyle("/* stylelint-disable selector-id-pattern */\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel {\n  border: 0 solid #232b33;\n  background-color: #404952;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-toolbar-grp {\n  padding: 2px 0;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-title,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-label {\n  color: #b5b9bf;\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.75);\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-path-item {\n  color: #b5b9bf;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel i.mce-i-resize {\n  color: #b5b9bf;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel i.mce-ico {\n  text-shadow: 1px 1px #000;\n  color: #b5b9bf;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel i.mce-caret {\n  border-top: 4px solid #b5b9bf;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn {\n  border: 1px solid #364049 !important;\n  border-color: #202a33 !important;\n  text-shadow: 0 1px 1px rgba(0, 0, 0, 0.75);\n  background-color: #4c5761 !important;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn.mce-active, body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn:hover,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn.mce-active,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn:hover {\n  background-image: none !important;\n  background-color: #004364 !important;\n  border-color: #24292e !important;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn.mce-disabled,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn.mce-disabled {\n  cursor: default;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn button,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn button {\n  padding: 4px 10px;\n  font-size: 14px;\n  cursor: pointer;\n  color: #b5b9bf;\n  text-align: center;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn button span,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn button span {\n  color: unset;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn-group .mce-btn {\n  border-width: 1px;\n  margin: 0;\n  margin-left: 2px;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu {\n  background: #2f3740;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal .mce-text {\n  color: #ddd;\n  background: transparent !important;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal.mce-selected, body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal.mce-active {\n  background-color: #0085c7;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal:hover {\n  text-decoration: none;\n  color: #fff;\n  background-color: #006597;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal .mce-caret {\n  border-left: 4px solid #b5b9bf;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-grid-border a.mce-active {\n  border-color: #d6d6d6;\n  background: #0085c7;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-text-center {\n  color: #ddd;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-edit-area {\n  border: 1px solid #000 !important;\n  border-right: 0 !important;\n  border-bottom: 0 !important;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] #oWalkthroughImageViewer {\n  border: 0 solid #232b33;\n  background-color: #2f3740;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] #oWalkthroughImageViewer .imageviewer {\n  background-color: #2f3740;\n}\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] #oWalkthroughImageViewer .noimages,\nbody.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] #oWalkthroughImageViewer .itemname {\n  color: #b5b9bf;\n}\n\n/* stylelint-enable selector-id-pattern */"),yield i(),r.log.debug("Staff-Walkthrough-Improvements-Styles","Finished")):r.log.error("Staff-Walkthrough-Improvements-Styles","Failed to add, The body element was not found")}))},{"../constants":9,"../scripts/helpers/wait":19,missionlog:6}]},{},[10]);