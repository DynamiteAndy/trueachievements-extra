// ==UserScript==
// @name          TrueAchievements Extra
// @namespace     dynamite-andy
// @version       2.2.0
// @iconURL       https://github.com/andrewcartwright1/trueachievements-extra/blob/main/src/resources/icons/favicon32x32.ico?raw=true
// @icon64URL     https://github.com/andrewcartwright1/trueachievements-extra/blob/main/src/resources/icons/favicon64x64.ico?raw=true
// @updateURL     https://github.com/andrewcartwright1/trueachievements-extra/raw/main/dist/trueachievements-extras.min.user.js
// @downloadURL   https://github.com/andrewcartwright1/trueachievements-extra/raw/main/dist/trueachievements-extras.min.user.js
// @supportURL    https://github.com/andrewcartwright1/trueachievements-extra/issues
// @description   Provides a variety of extras for use on TrueAchievements
// @author        Dynamite Andy - dynamiteandy@gmail.com
// @match         http*://*.trueachievements.com/*
// @run-at        document-start
// @grant         GM_getValue
// @grant         GM_setValue
// @grant         GM_deleteValue
// @grant         GM_addStyle
// ==/UserScript==
(()=>{"use strict";var e={"./node_modules/ajax-interceptor/index.js":(e,t)=>{var a=XMLHttpRequest.prototype.send,r=[],o=[],s=!1;function n(e,t){var a=e.indexOf(t);if(!(a>-1))throw new Error("Could not remove "+t+" from array");e.splice(a,1)}function i(e,t){for(var a=0;a<e.length;a++)e[a](t)}function l(e){4===e.readyState&&i(o,e)}function h(e){var t=e.onreadystatechange;t&&(e.onreadystatechange=function(){l(e),t()})}t.addRequestCallback=function(e){r.push(e)},t.removeRequestCallback=function(e){n(r,e)},t.addResponseCallback=function(e){o.push(e)},t.removeResponseCallback=function(e){n(o,e)},t.isWired=function(){return s},t.wire=function(){if(s)throw new Error("Ajax interceptor already wired");XMLHttpRequest.prototype.send=function(){if(i(r,this),this.addEventListener){var e=this;this.addEventListener("readystatechange",(function(){l(e)}),!1)}else h(this);a.apply(this,arguments)},s=!0},t.unwire=function(){if(!s)throw new Error("Ajax interceptor not currently wired");XMLHttpRequest.prototype.send=a,s=!1}},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/scss/features/staff-walkthrough-improvements/tinymce/charcoal/skin.scss":(e,t,a)=>{a.d(t,{Z:()=>i});var r=a("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=a.n(r),s=a("./node_modules/css-loader/dist/runtime/api.js"),n=a.n(s)()(o());n.push([e.id,"body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel{border:0 solid #232b33;background-color:#404952}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-toolbar-grp{padding:2px 0}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-window-head,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-foot{border-color:#9e9e9e}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-title,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-label{color:#b5b9bf;text-shadow:0 1px 1px rgba(0,0,0,.75)}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-path-item{color:#b5b9bf}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel i.mce-i-resize{color:#b5b9bf}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel i.mce-ico{text-shadow:1px 1px #000;color:#b5b9bf}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel i.mce-caret{border-top:4px solid #b5b9bf}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn{border:1px solid #364049 !important;border-color:#202a33 !important;text-shadow:0 1px 1px rgba(0,0,0,.75);background-color:#4c5761 !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn:focus,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn.mce-active,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn:hover,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn:focus,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn.mce-active,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn:hover{background-image:none !important;background-color:#004364 !important;border-color:#24292e !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn.mce-disabled,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn.mce-disabled{cursor:default}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn.mce-primary,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn.mce-primary{background-color:#004364 !important;color:#fff;text-shadow:1px 1px #333}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn.mce-primary:hover,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn.mce-primary:hover{background-color:#00547d !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn button,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn button{padding:4px 10px;font-size:14px;cursor:pointer;color:#b5b9bf;text-align:center}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-menubtn button span,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn button span{color:unset}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-panel .mce-btn-group .mce-btn{border-width:1px;margin:0;margin-left:2px}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu{background:#2f3740}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-sep{background:#25313f;border-color:#424f5f}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal .mce-text{color:#ddd !important;background:rgba(0,0,0,0) !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal:focus,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal.mce-selected,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal.mce-active{background-color:#006597;color:#fff !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal:hover{text-decoration:none;color:#fff;background-color:#0085c7}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-menu-item-normal .mce-caret{border-left:4px solid #b5b9bf}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-grid-border a{border-color:#202a33;background-color:#4c5761}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-grid-border a.mce-active{background-color:#006597}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-text-center{color:#ddd}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-edit-area{border:1px solid #000 !important;border-right:0 !important;border-bottom:0 !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-tabs{background:#303942;border-bottom:1px solid #202a33}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-tabs .mce-tab{color:#b5b9bf;border-color:#202a33;background:#303942;text-shadow:0 1px 1px rgba(0,0,0,.75)}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-tabs .mce-tab.mce-active{background:#404952}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-i-checkbox,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] .mce-textbox,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] input{background-color:#4c5761;color:#bbb;border-color:#202a33;background-image:unset}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] #oWalkthroughImageViewer{border:0 solid #232b33;background-color:#2f3740}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] #oWalkthroughImageViewer .imageviewer{background-color:#2f3740}body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] #oWalkthroughImageViewer .noimages,body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-theme=dark] #oWalkthroughImageViewer .itemname{color:#b5b9bf}",""]);const i=n},"./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/scss/index.scss":(e,t,a)=>{a.d(t,{Z:()=>i});var r=a("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),o=a.n(r),s=a("./node_modules/css-loader/dist/runtime/api.js"),n=a.n(s)()(o());n.push([e.id,':root{--ta-x-sticky-header-height: $ta-x-sticky-header-height}body.trueachievement-extras .ta-x-hide{display:none}@media(min-width: 1200px){body.trueachievement-extras .middle{width:100%;max-width:1200px}}body.trueachievement-extras .ta-x-flex-break{flex-basis:100%;height:0;border:0;padding:0;margin:0}body.trueachievement-extras .ta-x-snackbar{visibility:hidden;min-width:250px;margin-left:-125px;background-color:#333;text-align:center;border-radius:1.5rem;padding:16px;position:fixed;z-index:1;left:50%;bottom:30px}body.trueachievement-extras .ta-x-snackbar-show{visibility:visible;animation:fadein .5s,fadeout .5s 2.5s}body.trueachievement-extras .ta-x-snackbar h2{color:#bbb;border-left:3px solid #3f67a4}body.trueachievement-extras .ta-x-snackbar h2.warning{border-color:#f57921}body.trueachievement-extras .ta-x-snackbar h2.danger{border-color:#f52721}body.trueachievement-extras .ta-x-snackbar h2.success{border-color:#58bb12}@keyframes fadein{from{bottom:0;opacity:0}to{bottom:30px;opacity:1}}@keyframes fadeout{from{bottom:30px;opacity:1}to{bottom:0;opacity:0}}body.trueachievement-extras .ta-x-y-show{transform:translateY(0);transition:transform .5s ease}body.trueachievement-extras .ta-x-y-hide{transform:translateY(-100%);transition:transform .5s ease}body.trueachievement-extras .ta-x-y-hide-no-transition{transform:translateY(-100%)}body.trueachievement-extras .ta-x-settings-menu-settings{max-height:547px;overflow-y:scroll !important;padding:0 1rem !important;padding-bottom:1rem !important;height:100%;position:relative}body.trueachievement-extras .ta-x-settings-menu-settings>div{display:block;padding:0}body.trueachievement-extras .ta-x-settings-menu-settings .frm-grp{user-select:none;margin-right:0}body.trueachievement-extras .ta-x-settings-menu-settings .frm-sel::after{top:10px}body.trueachievement-extras .ta-x-settings-menu-settings .t-settings>div{flex-wrap:wrap}body.trueachievement-extras .ta-x-settings-menu-settings .t-settings .ta-x-checkbox-help-text{font-size:1.2rem;padding-top:.5rem}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item{position:absolute;display:none;width:313px;padding-bottom:1rem}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item-show{display:block}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item .ta-x-settings-menu-changelog-wrapper{display:flex;flex-wrap:wrap}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item .ta-x-settings-menu-changelog-wrapper a{width:100%}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item .ta-x-settings-menu-changelog-wrapper h1,body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item .ta-x-settings-menu-changelog-wrapper h2{width:100%}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item .ta-x-settings-menu-changelog-wrapper h1{margin-bottom:1rem}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item .ta-x-settings-menu-changelog-wrapper h2{border-top:2px solid #0e5814;border-bottom:2px solid #0e5814;padding:.5rem}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-item .ta-x-settings-menu-changelog-wrapper .ta-x-changelog-marker{flex-basis:unset;align-self:center;padding-right:1rem}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion{flex-wrap:wrap;border:0;padding-bottom:0}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion:last-of-type{padding-bottom:0}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion-header,body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion-body{width:100%}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion-header{padding:1rem;flex-shrink:unset;color:#fff;cursor:pointer;user-select:none}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion-header span{width:100%;pointer-events:none}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion-header svg{height:20px;pointer-events:none}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion-header.collapsed svg{transition:all .5s linear}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion-header.expanded svg{transform:rotate(-180deg)}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion-body{border:1px solid #161616;border-top:0;border-bottom-left-radius:1rem;border-bottom-right-radius:1rem;padding:0;transition:max-height .5s ease-out;max-height:0;overflow:hidden}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion .t-settings>div{padding:1rem 0;margin:0 1rem}body.trueachievement-extras .ta-x-settings-menu-settings .ta-x-settings-menu-settings-accordion .t-settings>div:last-of-type{border:0}body.trueachievement-extras .ta-x-settings-menu-columned-setting{flex-direction:column;align-items:flex-start}body.trueachievement-extras .ta-x-settings-menu-columned-setting>div:first-of-type{display:flex}body.trueachievement-extras .ta-x-settings-menu-columned-setting .frm-sel{padding-top:1rem}body.trueachievement-extras .ta-x-settings-menu-bottom{background:#4a5568;position:absolute;bottom:0;display:block;width:100%;padding:0 1rem !important}body.trueachievement-extras .ta-x-settings-menu-bottom .title{margin-bottom:0;color:#ddd;border:0}body.trueachievement-extras .ta-x-settings-menu-bottom .title a{background:unset}body.trueachievement-extras .ta-x-settings-menu-bottom .title a:hover{text-decoration:underline}body.trueachievement-extras .ta-x-settings-menu .close i{pointer-events:none}body.trueachievement-extras [data-theme=dark] .ta-x-settings-menu-bottom .buttons{border-color:#000 !important}body.trueachievement-extras [data-theme=dark] .ta-x-settings-menu-bottom .buttons a{background:#4299e1 !important}body.trueachievement-extras [data-theme=dark] .ta-x-settings-menu .ta-x-settings-menu-settings-accordion-header{color:#ddd}body.trueachievement-extras .ta-x-sticky-header{position:fixed;top:0;width:100%}body.trueachievement-extras.ta-x-staff-walkthrough-improvements{min-width:unset !important;overflow:auto}body.trueachievement-extras.ta-x-staff-walkthrough-improvements main{min-height:unset !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page{position:unset;display:flex;flex-direction:column}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector#oWalkthroughImageViewer{width:321px}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .noimages,body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .itemname{padding:5px;text-align:center;font-size:unset !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-sticky-header{position:sticky;border-bottom:1px solid #000;display:flex;flex-direction:column;background-color:#fff}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-sticky-header .noimages{margin-top:0}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector a[title="Add images"]{text-align:center;padding:5px;cursor:pointer !important}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector a[title="Add images"]:hover{text-decoration:underline}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .imageviewer{display:flex;flex-wrap:wrap}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .imageviewer .ivimage{position:unset;margin:5px;max-width:46%}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title{text-align:center;padding-top:3px;white-space:break-spaces}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle svg{height:20px;pointer-events:none}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle svg path{fill:#555;filter:drop-shadow(21px 21px #fff);pointer-events:none}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle svg:hover path{fill:#333}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle svg.ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle-light{display:none}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle svg.ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle-dark{display:block}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle [data-ta-x-tinymce-theme=dark] svg.ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle-light{display:block}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle [data-ta-x-tinymce-theme=dark] svg.ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle-dark{display:none}body.trueachievement-extras.ta-x-staff-walkthrough-improvements [data-theme=dark] .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title{color:#b5b9bf}body.trueachievement-extras.ta-x-staff-walkthrough-improvements [data-theme=dark] .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-sticky-header{background-color:#2f3740}body.trueachievement-extras.ta-x-staff-walkthrough-improvements [data-theme=dark] .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector .ta-x-sticky-header .itemname{color:#b5b9bf}body.trueachievement-extras.ta-x-staff-walkthrough-improvements [data-theme=dark] .admin-page .ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle svg path{fill:#b5b9bf;filter:drop-shadow(21px 21px #000)}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divWalkthroughHolder{position:unset;margin-top:unset;height:unset;display:flex;justify-content:space-between}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .buttons{display:flex}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .button{display:block;flex-grow:1}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .button#btnSearchWalkthrough{margin:0;margin-bottom:3px}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .button#btnSearchWalkthrough:hover{margin-bottom:5px}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #divSearchWalkthrough .clearboth{display:none}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughs,body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chEditWalkthrough,body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughAchievements,body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughGames,body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughGamers,body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chWalkthroughOtherSiteLink{position:unset;top:unset;left:unset;display:block;margin:0}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #chEditWalkthrough{flex:1;margin:0 1.5rem}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page #btnWalkthrough{display:none}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container{display:flex;flex-direction:column;justify-content:space-around}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container{display:flex}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions,body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPagePreview{margin-left:0;position:unset;width:unset}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPagePreview{flex:1}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions{height:100%}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions.ta-x-staff-walkthrough-improvements-walkthrough-page-sticky-page-history{position:relative;top:var(--ta-x-staff-walkthrough-improvements-walkthrough-page-sticky-page-history-top, 0)}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions.ta-x-y-hide{transform:translateY(calc(-1 * var(--ta-x-sticky-header-height, 0)));transition:transform .5s ease}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions.ta-x-y-hide-no-transition{transform:translateY(calc(-1 * var(--ta-x-sticky-header-height, 0)))}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions .content .buttons{display:flex;justify-content:center;flex-direction:column}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions .content .buttons .button{flex:1}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions .content .buttons .button:not(:first-of-type){margin-top:5px}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container #chWalkthroughPageVersions .content .buttons .clearboth{display:none}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-move-buttons-to-left #chWalkthroughPagePreview .content .buttons{display:none}body.trueachievement-extras.ta-x-staff-walkthrough-improvements .admin-page .ta-x-staff-walkthrough-improvements-walkthrough-page-container.ta-x-staff-walkthrough-improvements-walkthrough-page-move-buttons-to-left #chWalkthroughPagePreview .content .buttons .clearboth{display:none}',""]);const i=n},"./node_modules/css-loader/dist/runtime/api.js":e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",r=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),r&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),r&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,r,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var n={};if(r)for(var i=0;i<this.length;i++){var l=this[i][0];null!=l&&(n[l]=!0)}for(var h=0;h<e.length;h++){var m=[].concat(e[h]);r&&n[m[0]]||(void 0!==s&&(void 0===m[5]||(m[1]="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {").concat(m[1],"}")),m[5]=s),a&&(m[2]?(m[1]="@media ".concat(m[2]," {").concat(m[1],"}"),m[2]=a):m[2]=a),o&&(m[4]?(m[1]="@supports (".concat(m[4],") {").concat(m[1],"}"),m[4]=o):m[4]="".concat(o)),t.push(m))}},t}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":e=>{e.exports=function(e){return e[1]}},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":e=>{var t=[];function a(e){for(var a=-1,r=0;r<t.length;r++)if(t[r].identifier===e){a=r;break}return a}function r(e,r){for(var s={},n=[],i=0;i<e.length;i++){var l=e[i],h=r.base?l[0]+r.base:l[0],m=s[h]||0,c="".concat(h," ").concat(m);s[h]=m+1;var u=a(c),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)t[u].references++,t[u].updater(g);else{var d=o(g,r);r.byIndex=i,t.splice(i,0,{identifier:c,updater:d,references:1})}n.push(c)}return n}function o(e,t){var a=t.domAPI(t);a.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,o){var s=r(e=e||[],o=o||{});return function(e){e=e||[];for(var n=0;n<s.length;n++){var i=a(s[n]);t[i].references--}for(var l=r(e,o),h=0;h<s.length;h++){var m=a(s[h]);0===t[m].references&&(t[m].updater(),t.splice(m,1))}s=l}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":e=>{var t={};e.exports=function(e,a){var r=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(a)}},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(e,t,a)=>{e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var r="";a.supports&&(r+="@supports (".concat(a.supports,") {")),a.media&&(r+="@media ".concat(a.media," {"));var o=void 0!==a.layer;o&&(r+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),r+=a.css,o&&(r+="}"),a.media&&(r+="}"),a.supports&&(r+="}");var s=a.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var s=t[r]={id:r,exports:{}};return e[r](s,s.exports,a),s.exports}a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.nc=void 0,(()=>{var e=a("./node_modules/ajax-interceptor/index.js");const t=e=>"string"==typeof e?new Date(e):e,r=e=>new Date<t(e);class o{static get memoize(){const e=GM_getValue("trueachievements-extra-memoized","");return 0!==e.length?new Map(JSON.parse(e)):new Map}static set memoize(e){GM_setValue("trueachievements-extra-memoized",JSON.stringify(Array.from(e.entries())))}static forceClear(){GM_deleteValue("trueachievements-extra-memoized")}static clearExpired(){const e=Array.from(this.memoize.entries()).filter((e=>r(e[1].expiryTime)));this.memoize=new Map(e)}}var s,n,i,l,h,m,c,u,g,d,f,p,k,v,x,y,w;const b="ta-x",S="js-ta-x",W="--ta-x";class I{}I.Styles=((s=class{}).root="trueachievement-extras",s.Components=((n=class{}).accordion=`${S}-accordion`,n.snackbar=`${S}-snackbar`,n.showSnackbar=`${b}-snackbar-show`,n),s.Animations=((i=class{}).yShow=`${b}-y-show`,i.yHide=`${b}-y-hide`,i.yHideNoTransition=`${i.yHide}-no-transition`,i),s.Base=((l=class{}).hide=`${b}-hide`,l),s.SettingsMenu=((h=class{}).featureJs=`${S}-settings-menu`,h.featureStyle=`${b}-settings-menu`,h.subSetting=`${h.featureStyle}-sub-setting`,h.wrenchJs=`${h.featureJs}-wrench`,h.closeJs=`${h.featureJs}-close`,h.versionLink=`${h.featureJs}-version`,h.changelogView=`${h.featureJs}-changelog`,h.settingsView=`${h.featureJs}-settings`,h.settingsContentShow=`${h.featureStyle}-settings-item-show`,h),s.StickyHeader=((m=class{}).featureJs=`${S}-sticky-header`,m.featureStyle=`${b}-sticky-header`,m),s.StaffWalkthroughImprovements=((c=class{}).featureJs=`${S}-staff-walkthrough-improvements`,c.featureStyle=`${b}-staff-walkthrough-improvements`,c.WalkthroughPage=((u=class{}).featureJs=`${S}-staff-walkthrough-improvements-walkthrough-page`,u.featureStyle=`${b}-staff-walkthrough-improvements-walkthrough-page`,u.containerJs=`${u.featureJs}-container`,u.containerStyle=`${u.featureStyle}-container`,u.stickyPageHistoryJs=`${u.featureJs}-sticky-page-history`,u.stickyPageHistoryStyle=`${u.featureStyle}-sticky-page-history`,u.moveButtonsToLeftStyle=`${u.featureStyle}-move-buttons-to-left`,u.walkthroughTeamButtonJs=`${u.featureJs}-walkthrough-team-button`,u),c.ManageWalkthroughPage=((g=class{}).featureJs=`${S}-staff-walkthrough-improvements-manage-walkthrough-page`,g.featureStyle=`${b}-staff-walkthrough-improvements-manage-walkthrough-page`,g.containerJs=`${g.featureJs}-container`,g.containerStyle=`${g.featureStyle}-container`,g.clickableAchievementsJs=`${g.featureJs}-clickable-achievements`,g),c.EditWalkthroughPage=((d=class{}).featureJs=`${S}-staff-walkthrough-improvements-edit-walkthrough-page`,d.featureStyle=`${b}-staff-walkthrough-improvements-edit-walkthrough-page`,d.containerJs=`${d.featureJs}-container`,d.containerStyle=`${d.featureStyle}-container`,d.improvedImageSelectorJs=`${d.featureJs}-improved-image-selector`,d.improvedImageSelectorStyle=`${d.featureStyle}-improved-image-selector`,d.improvedImageSelectorContainerJs=`${d.improvedImageSelectorJs}-container`,d.improvedImageSelectorContainerStyle=`${d.improvedImageSelectorStyle}-container`,d.improvedImageSelectorImageTitleJs=`${d.improvedImageSelectorJs}-image-title`,d.improvedImageSelectorImageTitleStyle=`${d.improvedImageSelectorStyle}-image-title`,d.themeToggleJs=`${d.featureJs}-theme-toggle`,d.themeToggleStyle=`${d.featureStyle}-theme-toggle`,d.themeToggleDarkStyle=`${d.themeToggleStyle}-dark`,d.themeToggleLightStyle=`${d.themeToggleStyle}-light`,d),c),s.Variables=((f=class{}).StickyHeader=((p=class{}).featureVariableStylePrefix=`${W}-sticky-header`,p.height=`${p.featureVariableStylePrefix}-height`,p),f.StaffWalkthroughImprovements=((k=class{}).WalkthroughPage=((v=class{}).featureVariableStylePrefix=`${W}-staff-walkthrough-improvements-walkthrough-page`,v.stickyPageHistoryTop=`${v.featureVariableStylePrefix}-sticky-page-history-top`,v),k),f),s),I.Templates=((x=class{}).StaffWalkthroughImprovements=((y=class{}).ManageWalkthroughPage=((w=class{}).featureTemplatePrefix="ta-x-template-manage-walkthrough",w.achievementRow=`${w.featureTemplatePrefix}-achievement-row`,w),y),x);const T=(e,t,a)=>{const r=GM_getValue(t);if(void 0!==r)return r;const o=GM_getValue(e,a);return GM_setValue(t,o),GM_deleteValue(e),o},L={get enabled(){return T("trueachievements-extra-stickyHeader-enabled","stickyHeader-enabled",!1)},set enabled(e){GM_setValue("stickyHeader-enabled",e)}},P={get improvedImageSelector(){return T("trueachievements-extra-staffWalkthroughImprovements-improvedImageSelector","improvedImageSelector",!1)},set improvedImageSelector(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-improvedImageSelector",e)},get autoSaveNotification(){return GM_getValue("autoSaveNotification",!1)},set autoSaveNotification(e){GM_setValue("autoSaveNotification",e)},get tinymceTheme(){return T("trueachievements-extra-staffWalkthroughImprovements-tinymceTheme","tinymceTheme",null)},set tinymceTheme(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-tinymceTheme",e)}},M={get manageWalkthroughDefaultStatus(){return T("trueachievements-extra-staffWalkthroughImprovements-manageWalkthroughDefaultStatus","manageWalkthroughDefaultStatus",!1)},set manageWalkthroughDefaultStatus(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-manageWalkthroughDefaultStatus",e)},get clickableTableLinks(){return T("trueachievements-extra-staffWalkthroughImprovements-clickableTableLinks","clickableTableLinks",!1)},set clickableTableLinks(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-clickableTableLinks",e)},get autoSelectFirst(){return GM_getValue("autoSelectFirst",!1)},set autoSelectFirst(e){GM_setValue("autoSelectFirst",e)},get manageWalkthroughDefaultStatusValue(){return T("trueachievements-extra-staffWalkthroughImprovements-manageWalkthroughDefaultStatusValue","manageWalkthroughDefaultStatusValue","-1")},set manageWalkthroughDefaultStatusValue(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-manageWalkthroughDefaultStatusValue",e)}},A={get stickyPageHistory(){return T("trueachievements-extra-staffWalkthroughImprovements-stickyPageHistory","stickyPageHistory",!1)},set stickyPageHistory(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-stickyPageHistory",e)},get moveButtonsToLeft(){return T("trueachievements-extra-staffWalkthroughImprovements-editPageLeft","moveButtonsToLeft",!1)},set moveButtonsToLeft(e){GM_setValue("moveButtonsToLeft",e)},get walkthroughTeamButton(){return T("trueachievements-extra-staffWalkthroughImprovements-walkthroughTeamButton","walkthroughTeamButton",!1)},set walkthroughTeamButton(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-walkthroughTeamButton",e)},get highlightPageLocked(){return GM_getValue("highlightPageLocked",!1)},set highlightPageLocked(e){GM_setValue("highlightPageLocked",e)}},q={get enabled(){return T("trueachievements-extra-staffWalkthroughImprovements-enabled","staffWalkthroughImprovements-enabled",!1)},set enabled(e){GM_setValue("trueachievements-extra-staffWalkthroughImprovements-enabled",e)},editWalkthrough:P,manageWalkthrough:M,walkthroughPage:A},E={stickyHeader:L,staffWalkthroughImprovements:q},H=(e,t=[])=>{t=Array.isArray(t)?t:[t];try{const a=new URL(e);let r="";for(let e=0;e<t.length;e++)a[t[e]]&&(r+=a[t[e]]);return r}catch(t){throw`${e} is not a valid url`}},$=new RegExp("^/a[0-9]*/.*","i"),C=new RegExp("^/a[0-9]*/.*","i"),j=(new RegExp("^/game/.*/achievements$","i"),new RegExp("^/staff/walkthrough/editwalkthroughpage.aspx","i")),J=new RegExp("^/staff/walkthrough/managewalkthrough.aspx","i"),D=new RegExp("^/staff/walkthrough/managewalkthrough.aspx\\?walkthroughid=[0-9]*","i"),V=new RegExp("^/staff/walkthrough/walkthroughpage.aspx","i"),_=new RegExp("^/staff/walkthrough/walkthroughpreview.aspx","i"),N=new RegExp("^/staff/walkthrough/walkthroughpagepreview.aspx","i"),B=new RegExp("^/ajaxfunctions.aspx/AutoSave","i"),G={achievementUrl:$,achievementUrlWithGamerId:C,Test:{achievementUrl:(e=window.location.href)=>$.test(H(e,"pathname")),achievementUrlWithGamerId:(e=window.location.href)=>C.test(H(e,["pathname","search"]))}},F={autosave:(e=window.location.href)=>B.test(H(e,"pathname"))},R={Walkthroughs:{editWalkthroughUrl:j,manageWalkthroughUrl:J,manageWalkthroughUrlWithWalkthroughId:D,walkthroughPageUrl:V,walkthroughPreviewUrl:_,walkthroughPagePreviewUrl:N,Test:{all:(e=window.location.href)=>j.test(H(e,"pathname"))||J.test(H(e,"pathname"))||D.test(H(e,["pathname","search"]))||V.test(H(e,"pathname"))||_.test(H(e,"pathname"))||N.test(H(e,"pathname")),preview:(e=window.location.href)=>_.test(H(e,"pathname"))||N.test(H(e,"pathname")),editWalkthroughUrl:(e=window.location.href)=>j.test(H(e,"pathname")),manageWalkthroughUrl:(e=window.location.href)=>J.test(H(e,"pathname")),manageWalkthroughUrlWithWalkthroughId:(e=window.location.href)=>D.test(H(e,["pathname","search"])),walkthroughPageUrl:(e=window.location.href)=>V.test(H(e,"pathname")),walkthroughPreviewUrl:(e=window.location.href)=>_.test(H(e,"pathname")),walkthroughPagePreviewUrl:(e=window.location.href)=>N.test(H(e,"pathname"))}}},O=(new RegExp("Today","i"),new RegExp("Yesterday","i"),e=>"SELECT"===e.nodeName),U=e=>"INPUT"===e.nodeName&&"checkbox"===e.type,z=(e,t=document.documentElement,a=1e4)=>new Promise((r=>{if(null===t)return null;if(t===document.documentElement&&(t=document.documentElement),t.querySelector(e))return r(t.querySelector(e));let o;const s=setTimeout((()=>{o.disconnect(),r(null)}),a);o=new MutationObserver((()=>{t.querySelector(e)&&(o.disconnect(),clearTimeout(s),r(t.querySelector(e)))})),o.observe(t,{childList:!0,subtree:!0})})),Y=e=>()=>new Promise((t=>e((e=>t(e))))),Z=async(e,t,a=3)=>{if(0===t.length)return Promise.resolve([]);let r=0;const o=[],s=async()=>{for(;r<t.length;){const e=r++,a="Function"===t[e].task.constructor.name?Y(t[e].task):t[e].task;o[e]=await a()}},n=[];for(let e=0;e<a;e++)n.push(s());return await Promise.all(n),o},X=new Date((new Date).setHours(0,0,0,0)),K=(new Date(new Date(X).setDate(X.getDate()-1)),e=>{if("string"==typeof e){const t=parseInt(e.replace(/,/g,""),10);return isNaN(t)?null:t}return"boolean"==typeof e?e?1:0:"number"==typeof e?e:null}),Q=e=>"string"==typeof e?"true"===e.toLowerCase()||"false"!==e.toLowerCase()&&null:"number"==typeof e?1===e||0!==e&&null:"boolean"==typeof e?e:null,ee=(e,t)=>{const a=new RegExp(`${e}(.*?)${e}`),r=t.match(a);return r?r[1]:t},te=(e,t)=>{const a=new RegExp(`${e}(.*?)${e}`,"g"),r=t.match(a);return r?r.map((t=>t.replace(e,""))):[t]},ae=(e,t,a)=>t.split(".").reduce(((e,t)=>e?e[t]:a),e),re=(e,t,a)=>t.split(".").reduce(((e,r,o)=>e[r]=t.split(".").length===++o?a:e[r]||{}),e),oe={},se=new Map,ne=e=>"string"==typeof e?Symbol.for(e):e,ie=(e,t)=>oe[e]&&oe[e].has(t),le=(e,t="global",a)=>{if(!ie(e,t))return;const r=oe[e].get(t);if(void 0!==a)for(const e of r)se.get(e).call(null,a);else for(const e of r)se.get(e)()},he=(e,t,a,r="global",o=null)=>{const s=a?ne(a):Symbol();if(se.has(s))throw new Error("You can't override an existing listener identifier. You must unsubscribe it first");oe[e]||(oe[e]=new Map),oe[e].has(r)||oe[e].set(r,[]);const n=oe[e].get(r);return n.push(s),oe[e].set(r,n),se.set(s,o?t.bind(o):t),s},me=()=>{document.addEventListener("click",(({target:e})=>{if(!(e instanceof HTMLElement))return;if(!e.classList.contains(I.Styles.Components.accordion))return;e.classList.toggle("expanded");const t=e.nextElementSibling;t.style.maxHeight?t.style.maxHeight=null:t.style.maxHeight=`${t.scrollHeight}px`}))};const ce=async()=>{if(!await z("body"))return;const e=(new DOMParser).parseFromString('<div class="ta-x-snackbar js-ta-x-snackbar"><h2></h2></div>',"text/html");document.body.appendChild(e.querySelector(`.${I.Styles.Components.snackbar}`));const t=document.querySelector(`.${I.Styles.Components.snackbar}`),a=t.querySelector("h2");he("snackbar:show",(({text:e,type:r})=>{t&&(a.innerText=e,a.classList.add(r),t.classList.toggle(I.Styles.Components.showSnackbar),setTimeout((()=>{t.classList.toggle(I.Styles.Components.showSnackbar),a.classList.remove(r)}),3e3))}))};class ue{constructor(e){this.fromString(e)}fromString(e){try{const t=JSON.parse(e);this.selector=t.selector,this.value=Q(t.value)}catch(e){}}isValid(){return null!=this.selector&&null!=this.value}toString(){return JSON.stringify(this)}}class ge{constructor(e){e=e||{deleteAfter:{value:7,period:"days"}};const t=new Date;switch(e.deleteAfter.period){case"seconds":this.expiryTime=new Date(t.setSeconds(t.getSeconds()+e.deleteAfter.value));break;case"minutes":this.expiryTime=new Date(t.setMinutes(t.getMinutes()+e.deleteAfter.value));break;case"hours":this.expiryTime=new Date(t.setHours(t.getHours()+e.deleteAfter.value));break;case"days":this.expiryTime=new Date(t.setDate(t.getDate()+e.deleteAfter.value))}}setResponse(e){return this.response=e,this}fromString(e){try{const t=JSON.parse(e);this.expiryTime=t.expiryTime,this.response=t.response}catch(e){}}toString(){return JSON.stringify(this)}}const de=o.memoize,fe=async(e,t={},a)=>{const s=de.get(e);if(s&&r(new Date(s.expiryTime)))return s.response;const n=await(async(e,t={})=>(t.headers=t.headers||new Headers,t.method=t.method?t.method.toUpperCase():"GET",await fetch(e,t)))(e,t),i=await n.text();return de.set(e,new ge(a).setResponse(i)),o.memoize=de,i},pe=document.createElement("template"),ke=(e,t={})=>{const{image:a,element:r}=t;pe.appendChild(e),pe.innerHTML=e.outerHTML.replace(/(\r\n|\n|\r)/gm,"").replace(/{GM_info.script.version}/g,GM_info.script.version||"").replace(/{image.title}/g,a?.title||"").replace(/{element.outerHTML}/g,r?.outerHTML||"");const o=pe.content.firstChild;return pe.innerHTML="",o};let ve;const xe=()=>{ve=document.querySelector(`.${I.Styles.SettingsMenu.featureJs}`),[...ve.querySelectorAll("input, select")].forEach((e=>{const t=e.getAttribute("data-config-path");t&&(U(e)?e.checked=ae(E,t,!1):O(e)&&(e.value=ae(E,t,"")))})),ye()},ye=e=>{const t=e?`[data-render-condition*="#${e.id}"]`:"[data-render-condition]";[...ve.querySelectorAll(t)].forEach((t=>{const a=new ue(t.getAttribute("data-render-condition"));if(!a.isValid())return;const r=e||ve.querySelector(a.selector);if(U(r)){const e=r.checked===a.value?"remove":"add";t.classList[e](I.Styles.Base.hide)}}))},we=async()=>{await(async()=>{const e=(new DOMParser).parseFromString('<div class="js-ta-x-settings-menu-wrench gamer-page" aria-haspopup="true"> <i class="fa fa-wrench"></i> </div> <div class="js-ta-x-settings-menu ta-x-settings-menu ta-x-hide"> <div class="middle"> <div class="wrap"> <div class="labels"> <label class="js-ta-x-settings-menu-close close"> <i class="fa fa-close"></i> </label> </div> <div class="contents"> <div class="contents open ta-x-settings-menu-settings"> <div class="t-settings js-ta-x-settings-menu-settings ta-x-settings-menu-settings-item ta-x-settings-menu-settings-item-show"> <div data-render-condition="" class="ta-x-checkbox"> <label>Sticky Header</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStickyHeader" name="chkStickyHeader" data-config-path="stickyHeader.enabled" checked=""> <label for="chkStickyHeader"> </label> </div> </div> <div data-render-condition="" class="ta-x-checkbox"> <label>Staff Walkthrough Improvements</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovements" name="chkStaffWalkthroughImprovements" data-config-path="staffWalkthroughImprovements.enabled" checked=""> <label for="chkStaffWalkthroughImprovements"> </label> </div> </div> <div class="ta-x-settings-menu-settings-accordion" data-render-condition="{ &quot;selector&quot;: &quot;#chkStaffWalkthroughImprovements&quot;, &quot;value&quot;: &quot;true&quot; }"> <div class="ta-x-settings-menu-settings-accordion-header labels js-ta-x-accordion collapsed"> <span>Walkthrough Page</span> <svg class="ta-x-settings-menu-settings-accordion-header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"> \x3c!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e <path fill="currentColor" d="M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"></path> </svg> </div> <div class="ta-x-settings-menu-settings-accordion-body t-settings"> <div data-render-condition="" class="ta-x-checkbox"> <label>Stick Page History To Left</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsStickyPageHistory" name="chkStaffWalkthroughImprovementsStickyPageHistory" data-config-path="staffWalkthroughImprovements.walkthroughPage.stickyPageHistory" checked=""> <label for="chkStaffWalkthroughImprovementsStickyPageHistory"> </label> </div> </div> <div data-render-condition="" class="ta-x-checkbox"> <label>Move Buttons To The Left</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsMoveButtonsToLeft" name="chkStaffWalkthroughImprovementsMoveButtonsToLeft" data-config-path="staffWalkthroughImprovements.walkthroughPage.moveButtonsToLeft" checked=""> <label for="chkStaffWalkthroughImprovementsMoveButtonsToLeft"> </label> </div> </div> <div data-render-condition="" class="ta-x-checkbox"> <label>Add Walkthrough Team Button</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsWalkthroughTeamButton" name="chkStaffWalkthroughImprovementsWalkthroughTeamButton" data-config-path="staffWalkthroughImprovements.walkthroughPage.walkthroughTeamButton" checked=""> <label for="chkStaffWalkthroughImprovementsWalkthroughTeamButton"> </label> </div> </div> <div data-render-condition="" class="ta-x-checkbox"> <label>Highlight Page Locked</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsHighlightPageLocked" name="chkStaffWalkthroughImprovementsHighlightPageLocked" data-config-path="staffWalkthroughImprovements.walkthroughPage.highlightPageLocked" checked=""> <label for="chkStaffWalkthroughImprovementsHighlightPageLocked"> </label> </div> </div> </div> </div> <div class="ta-x-settings-menu-settings-accordion" data-render-condition="{ &quot;selector&quot;: &quot;#chkStaffWalkthroughImprovements&quot;, &quot;value&quot;: &quot;true&quot; }"> <div class="ta-x-settings-menu-settings-accordion-header labels js-ta-x-accordion collapsed"> <span>Edit Walkthrough</span> <svg class="ta-x-settings-menu-settings-accordion-header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"> \x3c!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e <path fill="currentColor" d="M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"></path> </svg> </div> <div class="ta-x-settings-menu-settings-accordion-body t-settings"> <div data-render-condition="" class="ta-x-checkbox"> <label>Improved Image Selector</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsImproveImageSelector" name="chkStaffWalkthroughImprovementsImproveImageSelector" data-config-path="staffWalkthroughImprovements.editWalkthrough.improvedImageSelector" checked=""> <label for="chkStaffWalkthroughImprovementsImproveImageSelector"> </label> </div> </div> <div data-render-condition="" class="ta-x-checkbox"> <label>Auto Save Notifications</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsAutoSaveNotification" name="chkStaffWalkthroughImprovementsAutoSaveNotification" data-config-path="staffWalkthroughImprovements.editWalkthrough.autoSaveNotification" checked=""> <label for="chkStaffWalkthroughImprovementsAutoSaveNotification"> </label> </div> </div> </div> </div> <div class="ta-x-settings-menu-settings-accordion" data-render-condition="{ &quot;selector&quot;: &quot;#chkStaffWalkthroughImprovements&quot;, &quot;value&quot;: &quot;true&quot; }"> <div class="ta-x-settings-menu-settings-accordion-header labels js-ta-x-accordion collapsed"> <span>Manage Walkthrough</span> <svg class="ta-x-settings-menu-settings-accordion-header-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"> \x3c!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e <path fill="currentColor" d="M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"></path> </svg> </div> <div class="ta-x-settings-menu-settings-accordion-body t-settings"> <div data-render-condition="" class="ta-x-checkbox"> <label>Clickable Table Links</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsClickableTableLinks" name="chkStaffWalkthroughImprovementsClickableTableLinks" data-config-path="staffWalkthroughImprovements.manageWalkthrough.clickableTableLinks" checked=""> <label for="chkStaffWalkthroughImprovementsClickableTableLinks"> </label> </div> </div> <div data-render-condition="" class="ta-x-checkbox"> <label>Auto Select First Walkthrough</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsAutoSelectFirst" name="chkStaffWalkthroughImprovementsAutoSelectFirst" data-config-path="staffWalkthroughImprovements.manageWalkthrough.autoSelectFirst" checked=""> <label for="chkStaffWalkthroughImprovementsAutoSelectFirst"> </label> </div> <div class="ta-x-flex-break"></div> <p data-render-condition="{ &quot;selector&quot;: &quot;#chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus&quot;, &quot;value&quot;: &quot;true&quot; }" class="ta-x-checkbox-help-text ta-x-hide">This feature runs after the default status has been set.</p> </div> <div class="ta-x-settings-menu-columned-setting"> <div data-render-condition="" class="ta-x-checkbox"> <label>Default Status for Manage Walkthrough</label> <div class="frm-grp frm-tgl"> <input type="checkbox" id="chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus" name="chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus" data-config-path="staffWalkthroughImprovements.manageWalkthrough.manageWalkthroughDefaultStatus" checked=""> <label for="chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus"> </label> </div> </div> <div data-render-condition="{ &quot;selector&quot;: &quot;#chkStaffWalkthroughImprovementsManageWalkthroughDefaultStatus&quot;, &quot;value&quot;: &quot;true&quot; }" class="frm-grp frm-sel ta-x-hide"> <select id="selStaffWalkthroughImprovementsManageWalkthroughDefaultStatusValue" name="selStaffWalkthroughImprovementsManageWalkthroughDefaultStatusValue" data-config-path="staffWalkthroughImprovements.manageWalkthrough.manageWalkthroughDefaultStatusValue" class="dropdown"> <option value="-1" selected="true">(All)</option> <option value="New" selected="">New</option> <option value="In progress" selected="">In progress</option> <option value="Ready for review" selected="">Ready for review</option> <option value="Ready for publish" selected="">Ready for publish</option> <option value="Published" selected="">Published</option> <option value="New owner required" selected="">New owner required</option> </select> </div> </div> </div> </div> </div> <div class="t-settings js-ta-x-settings-menu-changelog ta-x-settings-menu-settings-item"> <div class="ta-x-settings-menu-changelog-wrapper"> <h2>2.2.0</h2> <ul> <li><span class="ta-x-changelog-marker">&gt;</span><p>Fixed another issue where some walkthrough elements would not follow the tinymce theme,</p></li> <li><span class="ta-x-changelog-marker">&gt;</span><p>Add a autosave notification on edit walkthrough,</p></li> <li><span class="ta-x-changelog-marker">&gt;</span><p>Fixed a bug with auto select first where it would auto select the first even if a walkthrough was selected,</p></li> <li><span class="ta-x-changelog-marker">&gt;</span><p>Fixed a bug with auto select first (it was checking the wrong setting was enabled, sorry)!</p></li> </ul> <a class="ta-x-settings-menu-changelog-link" href="https://github.com/andrewcartwright1/trueachievements-extra/blob/main/CHANGELOG.md">See the full changelog here</a></div> </div> </div> <div class="t-settings open ta-x-settings-menu-bottom"> <ul class="list-links buttons"> <li><a href="https://github.com/andrewcartwright1/trueachievements-extra/issues/new">Raise a Bug</a></li> <li><a href="https://github.com/andrewcartwright1/trueachievements-extra/issues/new">Request a Feature</a></li> </ul> <div class="title"> <span>TrueAchievements Extra</span> <br> <a href="#" class="js-ta-x-settings-menu-version">Version {GM_info.script.version}</a> </div> </div> </div> </div> </div> <div class="js-ta-x-settings-menu-close close"></div> </div> ',"text/html"),t=await z("header nav"),a=await z('[data-tgl="nav-gamer"]',t);t.insertBefore(e.querySelector(`.${I.Styles.SettingsMenu.wrenchJs}`),a.nextSibling);const r=await z(".nav-gamer"),o=ke(e.querySelector(`.${I.Styles.SettingsMenu.featureJs}`));r.parentNode.insertBefore(o,r.nextSibling),xe()})(),(()=>{const e=document.querySelector(`.${I.Styles.SettingsMenu.wrenchJs}`);e.addEventListener("click",(()=>{e.classList.add("active"),ve.classList.add("nav-gamer"),ve.classList.remove(I.Styles.Base.hide),ve.classList.add("open")})),ve.addEventListener("click",(({target:t})=>{t instanceof HTMLElement&&t.classList.contains(I.Styles.SettingsMenu.closeJs)&&(ve.classList.remove("open"),ve.classList.add(I.Styles.Base.hide),ve.classList.remove("nav-gamer"),e.classList.remove("active"))})),ve.addEventListener("click",(({target:e})=>{e instanceof HTMLElement&&e.classList.contains(I.Styles.SettingsMenu.versionLink)&&(ve.querySelector(`.${I.Styles.SettingsMenu.changelogView}`).classList.toggle(I.Styles.SettingsMenu.settingsContentShow),ve.querySelector(`.${I.Styles.SettingsMenu.settingsView}`).classList.toggle(I.Styles.SettingsMenu.settingsContentShow))})),ve.addEventListener("change",(({target:e})=>{if(!(e instanceof HTMLElement))return;const t=e.getAttribute("data-config-path");O(e)?re(E,t,e.value):U(e)&&re(E,t,e.checked),ye(e)}))})()};let be,Se,We;const Ie=()=>window.pageYOffset<=be.offsetTop,Te=async()=>{L.enabled&&(await(async()=>{be=await z("header");const e=document.createElement("div");e.style.height=`${be.offsetHeight}px`,be.parentNode.insertBefore(e,be),be.classList.add(I.Styles.StickyHeader.featureJs,I.Styles.StickyHeader.featureStyle),document.documentElement.style.setProperty(I.Styles.Variables.StickyHeader.height,`${be.offsetHeight}px`),Ie()||be.classList.add(I.Styles.Animations.yHideNoTransition)})(),await(async()=>{const e=await z(`.nav-gamer:not(.${I.Styles.SettingsMenu.featureJs})`),t=await z(`.${I.Styles.SettingsMenu.featureJs}`);We=e.classList.contains("open")||t.classList.contains("open"),window.addEventListener("scroll",(()=>{const e=document.documentElement.scrollTop||document.body.scrollTop;Ie()?be.classList.remove(I.Styles.Animations.yHide,I.Styles.Animations.yHideNoTransition):"inline"===be.querySelector("#divtxtSearchContainer").style.display||Q(be.dataset.menuOpen)||(Se>e?(be.classList.remove(I.Styles.Animations.yHide,I.Styles.Animations.yHideNoTransition),be.classList.add(I.Styles.Animations.yShow)):Se<e&&(be.classList.remove(I.Styles.Animations.yShow),be.classList.add(I.Styles.Animations.yHide))),Se=e}));const a=new MutationObserver((e=>{e.forEach((({target:e,attributeName:t})=>{if(e instanceof HTMLElement&&"class"===t){const t=e.classList.contains("open");We!==t&&(We=t,be.setAttribute("data-menu-open",t.toString()))}}))}));a.observe(e,{attributes:!0,attributeFilter:["style","class"]}),a.observe(t,{attributes:!0,attributeFilter:["style","class"]})})())};const Le=async()=>{if(!M.manageWalkthroughDefaultStatus)return;if(R.Walkthroughs.Test.manageWalkthroughUrlWithWalkthroughId())return;const e=await z("#ddlStatusFilter");null===e.querySelector("[selected]")&&e.value!==M.manageWalkthroughDefaultStatusValue&&(e.value=M.manageWalkthroughDefaultStatusValue,e.onchange(null))};const Pe=async()=>{if(!M.clickableTableLinks)return;const e=await z("#lstWalkthroughIDselectedrow a");if(!e)return;const t=document.querySelector(`.${I.Styles.StaffWalkthroughImprovements.ManageWalkthroughPage.containerJs}`),a=K(te("'",e.href)[1]),r=await fe(`https://www.trueachievements.com/staff/walkthrough/walkthroughpreview.aspx?walkthroughid=${a}`),o=(new DOMParser).parseFromString(r,"text/html");await Z(0,[{name:"manage-walkthrough-clickable-table-links-clickable-achievements",task:async()=>(async(e,t)=>{if(await z("#chWalkthroughAchievements",e)){const a=(new DOMParser).parseFromString('<template id="ta-x-template-manage-walkthrough-achievement-row"> <tr> <td class="point"></td> <td class="c1">{element.outerHTML}</td> <td class="c2"></td> <td class="dlop plain"></td> </tr> </template>',"text/html"),r=[...e.querySelectorAll("#chWalkthroughAchievements #scrolllstWalkthroughAchievementID .c1")],o=e.querySelector("#chWalkthroughAchievements #scrolllstWalkthroughAchievementID tbody"),s=[...t.querySelectorAll(".walkthroughsummary .games a.gamelink")];await Z(0,s.map((e=>({name:`manage-walkthrough-clickable-table-links-clickable-achievements-${e.innerText}`,task:async()=>{const t=await fe(e.href),s=[...(new DOMParser).parseFromString(t,"text/html").querySelectorAll("main ul.ach-panels li a.title")];await Z(0,s.map((t=>({name:`manage-walkthrough-clickable-table-links-clickable-achievements-${e.innerText}-${t.innerText.trim()}`,task:async()=>{const e=t.innerText.trim(),s=r.find((t=>t.innerText.toLowerCase()===e.toLowerCase()));if(s){s.innerText="",s.innerHTML=t.outerHTML;const e=s.querySelector("a");e.href=G.Test.achievementUrlWithGamerId(e.href)?new URL(e.href).pathname:e.href}else{const e=a.querySelector(`#${I.Templates.StaffWalkthroughImprovements.ManageWalkthroughPage.achievementRow}`).content.firstElementChild.cloneNode(!0),r=ke(e,{element:t}),s=r.querySelector("a");r.querySelector("a").href=G.Test.achievementUrlWithGamerId(s.href)?new URL(s.href).pathname:s.href,o.appendChild(r)}}}))),5)}}))));const n=e.querySelector("#chWalkthroughAchievements #lstWalkthroughAchievementID .total");n.innerText=`${n.innerText}/${[...o.querySelectorAll("#chWalkthroughAchievements #scrolllstWalkthroughAchievementID .c1")].length}`}})(t,o)},{name:"manage-walkthrough-clickable-table-links-clickable-games",task:async()=>(async(e,t)=>{if(await z("#chWalkthroughGamers",e)){const a=[...t.querySelectorAll(".walkthroughsummary .games a.gamelink")];[...e.querySelectorAll("#scrolllstWalkthroughGames .c1")].forEach((e=>{const t=e.innerText.trim(),r=a.find((e=>e.innerText.toLowerCase()===t.toLowerCase()));r&&(e.innerText="",e.innerHTML=r.outerHTML)}))}})(t,o)},{name:"manage-walkthrough-clickable-table-links-clickable-gamers",task:async()=>(async(e,t)=>{if(await z("#chWalkthroughGamers",e)){const a=[...t.querySelectorAll(".walkthroughsummary .editors dd a")];[...e.querySelectorAll("#scrolllstWalkthroughGamers .c1")].forEach((e=>{const t=e.innerText.trim(),r=a.find((e=>e.innerText.toLowerCase()===t.toLowerCase()));r&&(e.innerText="",e.innerHTML=r.outerHTML)}))}})(t,o)}],1)},Me=async()=>{if(!M.autoSelectFirst)return;if(R.Walkthroughs.Test.manageWalkthroughUrlWithWalkthroughId())return;const e=await z("#scrolllstWalkthroughID");null===await z("#lstWalkthroughIDselectedrow",void 0,1e3)&&null!==e.querySelector("table tr")&&e.querySelector("table tr a").click()};let Ae;const qe=async()=>{const e=await z("#btnWalkthrough_Options",Ae);let t=null;[...e.querySelectorAll("li a")].forEach((e=>{t=t||e.closest(".buttons"),t&&(e.classList.add("button"),t.appendChild(e))})),t&&t.parentNode.insertBefore(t,t.previousElementSibling)},Ee=async()=>{const e=await z(`.${I.Styles.StaffWalkthroughImprovements.ManageWalkthroughPage.containerJs}`,Ae);if(e){const t=await z("#chWalkthroughAchievements",Ae);t&&(He(t),e.appendChild(t)),e.appendChild(await z("#chWalkthroughGames",Ae)),e.appendChild(await z("#chWalkthroughGamers",Ae)),e.appendChild(await z("#chWalkthroughOtherSiteLink",Ae))}},He=e=>{const t=[...e.querySelectorAll("#scrolllstWalkthroughAchievementID .c1")],a=((e,t=!1)=>t?[...new Set(e.filter(((e,t,a)=>a.indexOf(e)!==t)))]:e.filter(((e,t,a)=>a.indexOf(e)!==t)))(t.map((e=>e.innerText)),!0);if(a.length>0){const r=t.length;let o=0;for(let e=0;e<a.length;e++){const r=t.filter((t=>t.innerText.toLowerCase()===a[e].toLowerCase())),s=r[0].nextElementSibling;for(let e=1;e<r.length;e++){const t=r[e].nextElementSibling.innerText.trim();s.innerText+=`, ${t}`,r[e].closest("tr").remove(),o++}}const s=e.querySelector("#lstWalkthroughAchievementID .total");s.innerText=s.innerText.replace(r.toString(),(r-o).toString())}},$e=async()=>{R.Walkthroughs.Test.manageWalkthroughUrl()&&(await Le(),await Me(),await(async()=>{if(Ae=await z("#divWalkthroughHolder"),!Ae)return;const e=await z("#chEditWalkthrough",Ae);if(e){const t=(new DOMParser).parseFromString('<div class="js-ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container ta-x-staff-walkthrough-improvements-manage-walkthrough-page-container"> </div>',"text/html");e.after(t.querySelector(`.${I.Styles.StaffWalkthroughImprovements.ManageWalkthroughPage.containerJs}`)),await Z(0,[{name:"manage-walkthrough-adjust-right-sidebar",task:Ee},{name:"manage-walkthrough-adjust-buttons",task:qe}])}})(),await Pe())};const Ce='<div class="js-ta-x-staff-walkthrough-improvements-walkthrough-page-container ta-x-staff-walkthrough-improvements-walkthrough-page-container"> </div> <a class="button js-ta-x-staff-walkthrough-improvements-walkthrough-page-walkthrough-team-button" href="/staff/walkthrough/managewalkthrough.aspx">Walkthrough Team</a>',je=async(e,t)=>{if(!A.walkthroughTeamButton)return;if(!e||!t)return;const a=await z(".content .buttons",t);if(a){const e=(new DOMParser).parseFromString(Ce,"text/html");a.appendChild(e.querySelector(`.${I.Styles.StaffWalkthroughImprovements.WalkthroughPage.walkthroughTeamButtonJs}`))}},Je=async(e,t)=>{if(!A.moveButtonsToLeft)return;if(!e||!t)return;const a=await z("#btnEditPage, #btnEditPage2, #btnUnlockWalkthroughPage, #btnUnlockWalkthroughPage2",e),r=await z(".content .buttons",t);a&&r&&(r.append(...a.parentElement.childNodes),e.classList.add(I.Styles.StaffWalkthroughImprovements.WalkthroughPage.moveButtonsToLeftStyle))};let De,Ve,_e,Ne;const Be=e=>{let t,a=[I.Styles.Animations.yShow,I.Styles.Animations.yHide,I.Styles.Animations.yHideNoTransition],r=window.pageYOffset-_e.offsetTop+5;const o=()=>{document.documentElement.style.setProperty(I.Styles.Variables.StaffWalkthroughImprovements.WalkthroughPage.stickyPageHistoryTop,`${r}px`),Ne.classList.remove(...a),t&&Ne.classList.add(t)};if(window.pageYOffset<=_e.offsetTop+(De?Ve.offsetHeight:0)||(De?Ve.classList.contains(I.Styles.Animations.yShow)?(window.pageYOffset<=window.pageYOffset+Ve.offsetTop&&(r+=Ve.offsetTop),t=I.Styles.Animations.yShow,a=[I.Styles.Animations.yHide,I.Styles.Animations.yHideNoTransition]):(t=e?I.Styles.Animations.yHideNoTransition:I.Styles.Animations.yHide,a=[I.Styles.Animations.yShow]):r-=Ve.offsetHeight,!(r>=(De?Ve.offsetHeight:0)))){if(De&&r>=0&&Ve.classList.contains(I.Styles.Animations.yShow))return t=I.Styles.Animations.yShow,void o();r=0,o()}else o()},Ge=()=>{window.addEventListener("scroll",(()=>Be(!((e,t)=>{const a=Array.isArray(t)?t:[t];for(let t=0;t<a.length;t++)if(e.classList.contains(a[t]))return!0;return!1})(Ne,[I.Styles.Animations.yHideNoTransition,I.Styles.Animations.yHide,I.Styles.Animations.yShow]))))},Fe=async(e,t)=>{A.stickyPageHistory&&e&&t&&(_e=e,Ne=t,De=L.enabled,Ve=De?await z(`.${I.Styles.StickyHeader.featureJs}`):await z(".header"),t.classList.add(I.Styles.StaffWalkthroughImprovements.WalkthroughPage.stickyPageHistoryJs,I.Styles.StaffWalkthroughImprovements.WalkthroughPage.stickyPageHistoryStyle),Be(!0),Ge())},Re=async e=>{if(!A.highlightPageLocked)return;if(!e)return;const t=await z(".walkthroughlocked",e);t&&t.classList.add("informationpanel")};let Oe,Ue;const ze=async()=>{const e=await z("#chWalkthroughPagePreview");e&&Oe.appendChild(e)},Ye=async()=>{R.Walkthroughs.Test.walkthroughPageUrl()&&(await(async()=>{const e=(new DOMParser).parseFromString(Ce,"text/html");Ue=await z("#chWalkthroughPageVersions"),Ue.parentElement.insertBefore(e.querySelector(`.${I.Styles.StaffWalkthroughImprovements.WalkthroughPage.containerJs}`),Ue),Oe=document.querySelector(`.${I.Styles.StaffWalkthroughImprovements.WalkthroughPage.containerJs}`),Oe.appendChild(Ue),ze()})(),Z(0,[{name:"walkthrough-page-set-page-history-sticky",task:async()=>Fe(Oe,Ue)},{name:"walkthrough-page-add-walkthrough-team-button",task:async()=>je(Oe,Ue)},{name:"walkthrough-page-move-buttons-to-left",task:async()=>Je(Oe,Ue)},{name:"walkthrough-page-highlight-page-locked",task:async()=>Re(Oe)}]))},Ze=async()=>{P.autoSaveNotification&&he("ajaxIntercept:response",(e=>{F.autosave(e.responseURL)&&(200===e.status?le("snackbar:show",void 0,{text:"Autosave successful.",type:"success"}):le("snackbar:show",void 0,{text:"Autosave failed.",type:"danger"}))}))};const Xe='<div class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-container ta-x-sticky-header"> </div> <p class="js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title ta-x-staff-walkthrough-improvements-edit-walkthrough-page-improved-image-selector-image-title">{image.title}</p> <div class="mce-container mce-last mce-flow-layout-item mce-btn-group js-ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle" role="group"> <div> <div class="mce-widget mce-btn mce-first mce-last" tabindex="-1" role="button" aria-label="Switch theme"> <button role="presentation" type="button" tabindex="-1" data-ta-x-tinymce-theme> <svg class="ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle-dark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"> \x3c!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e <path fill="currentColor" d="M421.6 379.9c-.6641 0-1.35 .0625-2.049 .1953c-11.24 2.143-22.37 3.17-33.32 3.17c-94.81 0-174.1-77.14-174.1-175.5c0-63.19 33.79-121.3 88.73-152.6c8.467-4.812 6.339-17.66-3.279-19.44c-11.2-2.078-29.53-3.746-40.9-3.746C132.3 31.1 32 132.2 32 256c0 123.6 100.1 224 223.8 224c69.04 0 132.1-31.45 173.8-82.93C435.3 389.1 429.1 379.9 421.6 379.9zM255.8 432C158.9 432 80 353 80 256c0-76.32 48.77-141.4 116.7-165.8C175.2 125 163.2 165.6 163.2 207.8c0 99.44 65.13 183.9 154.9 212.8C298.5 428.1 277.4 432 255.8 432z"></path> </svg> <svg class="ta-x-staff-walkthrough-improvements-edit-walkthrough-page-theme-toggle-light" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"> \x3c!--! Font Awesome Pro 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2022 Fonticons, Inc. --\x3e <path fill="currentColor" d="M505.2 324.8l-47.73-68.78l47.75-68.81c7.359-10.62 8.797-24.12 3.844-36.06c-4.969-11.94-15.52-20.44-28.22-22.72l-82.39-14.88l-14.89-82.41c-2.281-12.72-10.76-23.25-22.69-28.22c-11.97-4.936-25.42-3.498-36.12 3.844L256 54.49L187.2 6.709C176.5-.6016 163.1-2.039 151.1 2.896c-11.92 4.971-20.4 15.5-22.7 28.19l-14.89 82.44L31.15 128.4C18.42 130.7 7.854 139.2 2.9 151.2C-2.051 163.1-.5996 176.6 6.775 187.2l47.73 68.78l-47.75 68.81c-7.359 10.62-8.795 24.12-3.844 36.06c4.969 11.94 15.52 20.44 28.22 22.72l82.39 14.88l14.89 82.41c2.297 12.72 10.78 23.25 22.7 28.22c11.95 4.906 25.44 3.531 36.09-3.844L256 457.5l68.83 47.78C331.3 509.7 338.8 512 346.3 512c4.906 0 9.859-.9687 14.56-2.906c11.92-4.969 20.4-15.5 22.7-28.19l14.89-82.44l82.37-14.88c12.73-2.281 23.3-10.78 28.25-22.75C514.1 348.9 512.6 335.4 505.2 324.8zM456.8 339.2l-99.61 18l-18 99.63L256 399.1L172.8 456.8l-18-99.63l-99.61-18L112.9 255.1L55.23 172.8l99.61-18l18-99.63L256 112.9l83.15-57.75l18.02 99.66l99.61 18L399.1 255.1L456.8 339.2zM256 143.1c-61.85 0-111.1 50.14-111.1 111.1c0 61.85 50.15 111.1 111.1 111.1s111.1-50.14 111.1-111.1C367.1 194.1 317.8 143.1 256 143.1zM256 319.1c-35.28 0-63.99-28.71-63.99-63.99S220.7 192 256 192s63.99 28.71 63.99 63.1S291.3 319.1 256 319.1z"/> </svg> </button> </div> </div> </div>',Ke=async()=>{if(!P.improvedImageSelector)return;const e=await z("#oWalkthroughImageViewer");if(!e)return;e.classList.add(I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorStyle,I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorJs);const t=(new DOMParser).parseFromString(Xe,"text/html"),a=t.querySelector(`.${I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorContainerJs}`),r=await z(".imageviewer",e),o=await z(".addimages a",e);e.insertBefore(a,r),a.appendChild(r.querySelector(".itemname, .noimages")),a.appendChild(o),[...r.querySelectorAll(".ivimage a")].forEach((e=>{const a=t.querySelector(`.${I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorImageTitleJs}`).cloneNode(!0),r=ke(a,{image:e.querySelector("img")});r.innerText=ee("'",r.innerText),e.appendChild(r)})),document.addEventListener("click",(({target:e})=>{if(!(e instanceof HTMLElement))return;if(null!==e.closest(`[aria-label='Add Image'], .${I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorJs}`))return;const t=document.querySelector(`.${I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorJs}`);"block"===t.style.display&&(t.style.display="none")})),window.addEventListener("blur",(()=>{if(document.activeElement===document.querySelector("#txtWalkthrough_ifr")){const e=document.querySelector(`.${I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.improvedImageSelectorJs}`);if("block"!==e.style.display)return;e.style.display="none"}}))};var Qe=a("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),et=a.n(Qe),tt=a("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),at=a.n(tt),rt=a("./node_modules/style-loader/dist/runtime/insertBySelector.js"),ot=a.n(rt),st=a("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),nt=a.n(st),it=a("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),lt=a.n(it),ht=a("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),mt=a.n(ht),ct=a("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/scss/features/staff-walkthrough-improvements/tinymce/charcoal/skin.scss"),ut={};ut.styleTagTransform=mt(),ut.setAttributes=nt(),ut.insert=ot().bind(null,"head"),ut.domAPI=at(),ut.insertStyleElement=lt();et()(ct.Z,ut);const gt=ct.Z&&ct.Z.locals?ct.Z.locals:void 0;let dt,ft;const pt=async()=>(ft=ft||await z(".page, [data-theme]"),null!==P.tinymceTheme?P.tinymceTheme:ft?ft.getAttribute("data-theme"):""),kt=async()=>{if(!await z('[href*="skin.min.css"]',document.head))return;const e=await z(".mce-tinymce .mce-toolbar.mce-last .mce-container-body");if(!e)return;GM_addStyle(gt);const t=(new DOMParser).parseFromString(Xe,"text/html").querySelector(`.${I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.themeToggleJs}`);e.appendChild(t),dt=e.querySelector(`.${I.Styles.StaffWalkthroughImprovements.EditWalkthroughPage.themeToggleJs} [data-ta-x-tinymce-theme]`);const a=await pt();dt.setAttribute("data-ta-x-tinymce-theme",a),document.body.setAttribute("data-ta-x-theme",a),await(async()=>{dt.addEventListener("click",(({target:e})=>{if(!(e instanceof HTMLElement))return;const t="dark"===e.getAttribute("data-ta-x-tinymce-theme")?"":"dark";P.tinymceTheme=t,e.setAttribute("data-ta-x-tinymce-theme",t)}));const e=await z("#txtWalkthrough_ifr");e.addEventListener("load",(async()=>{const t=e&&e.contentDocument,a=await z("#tinymce",t);a.classList.add(I.Styles.root,I.Styles.StaffWalkthroughImprovements.featureStyle),a.setAttribute("data-ta-x-tinymce-theme",await pt());const r=t.createElement("style");r.id="ta-x-staff-walkthrough-improvements-dark-tinymce-style",r.innerHTML="body.trueachievement-extras.ta-x-staff-walkthrough-improvements[data-ta-x-tinymce-theme=dark]{background-color:#444;color:#bbb;border-color:#555}",t.head.appendChild(r);const o=t.createElement("script");o.id="ta-x-staff-walkthrough-improvements-dark-tinymce-script",o.innerHTML="window.addEventListener('message', function(event) {\n      console.log(event);\n      if (!event || !event.data || event.data.theme === null || event.data.theme === undefined) return;\n      document.body.setAttribute('data-ta-x-tinymce-theme', event.data.theme);\n    });",t.head.appendChild(o),e.removeEventListener("load",void 0)}));let t=!1;const a=new MutationObserver((a=>{t?t=!1:a.forEach((a=>{if("attributes"!==a.type)return;if(!(a.target instanceof HTMLElement))return;let r;if("data-theme"===a.attributeName)r=a.target.getAttribute("data-theme"),t=!0,dt.setAttribute("data-ta-x-tinymce-theme","dark"===r?r:""),document.body.setAttribute("data-ta-x-theme","dark"===r?r:"");else{if("data-ta-x-tinymce-theme"!==a.attributeName)return;r=a.target.getAttribute("data-ta-x-tinymce-theme")}null!=r&&e.contentWindow.postMessage({theme:r},"*")}))}));a.observe(dt,{attributes:!0}),a.observe(ft,{attributes:!0})})()},vt=async()=>{R.Walkthroughs.Test.editWalkthroughUrl()&&Z(0,[{name:"edit-walkthrough-improve-image-selector",task:Ke},{name:"edit-walkthrough-add-tinymce-theme-toggle",task:kt},{name:"edit-walkthrough-auto-save-notification",task:Ze}],3)},xt=async()=>{R.Walkthroughs.Test.preview()&&await(async()=>{const e=await z(".page main");e.parentElement.classList.add("no-aside"),e.classList.add("no-aside"),(await z(".page aside")).remove()})()},yt=async()=>{q.enabled&&R.Walkthroughs.Test.all()&&await z("body")&&(document.body.classList.add(I.Styles.StaffWalkthroughImprovements.featureJs,I.Styles.StaffWalkthroughImprovements.featureStyle),Z(0,[{name:"staff-walkthrough-improvements-manage-walkthrough",task:$e},{name:"staff-walkthrough-improvements-walkthrough-preview",task:xt},{name:"staff-walkthrough-improvements-walkthrough-page",task:Ye},{name:"staff-walkthrough-improvements-edit-walkthrough",task:vt}],4))};var wt=a("./node_modules/css-loader/dist/cjs.js!./node_modules/sass-loader/dist/cjs.js!./src/scss/index.scss"),bt={};bt.styleTagTransform=mt(),bt.setAttributes=nt(),bt.insert=ot().bind(null,"head"),bt.domAPI=at(),bt.insertStyleElement=lt();et()(wt.Z,bt);const St=wt.Z&&wt.Z.locals?wt.Z.locals:void 0,Wt=async()=>{await z("body")&&(document.body.classList.add(I.Styles.root),GM_addStyle(St))};e.addRequestCallback((e=>le("ajaxIntercept:request",void 0,e))),e.addResponseCallback((e=>le("ajaxIntercept:response",void 0,e))),e.wire(),(async()=>{Z(0,[{name:"component:snackbar",task:ce},{name:"component:accordion",task:me}],3),Z(0,[{name:"feature:styles",task:Wt},{name:"feature:settings-menu",task:we},{name:"feature:sticky-header",task:Te},{name:"feature:staff-walkthrough-improvements",task:yt}]),o.clearExpired()})()})()})();